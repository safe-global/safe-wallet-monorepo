+ Allow Webpack to resolve ECMAScript modules without explicit extensions
+ Currently required for firebase to compile in next-pwa custom worker
+ https://webpack.js.org/configuration/module/#resolvefullyspecified

diff --git a/node_modules/@ducanh2912/next-pwa/dist/index.cjs b/node_modules/@ducanh2912/next-pwa/dist/index.cjs
index 3a9d49b..08ab877 100644
--- a/node_modules/@ducanh2912/next-pwa/dist/index.cjs
+++ b/node_modules/@ducanh2912/next-pwa/dist/index.cjs
@@ -1,2 +1,2 @@
 'use strict';Object.defineProperty(exports,'__esModule',{value:true});var r=require('path'),url=require('url'),module$1=require('module'),e$2=require('fs'),n$1=require('process'),l=require('os'),i=require('tty'),semver=require('semver'),cleanWebpackPlugin=require('clean-webpack-plugin'),s$1=require('fast-glob'),t$1=require('workbox-webpack-plugin'),e$3=require('crypto'),n$2=require('webpack'),s=require('terser-webpack-plugin');let e$1;let a$1=(e,r,t)=>{e.jsc||(e.jsc={}),e.jsc.baseUrl=r,e.jsc.paths=t;},c=(e,r)=>{for(let t of e){let e=r(t);if(e)return e}},u=module$1.createRequire((typeof document === 'undefined' ? require('u' + 'rl').pathToFileURL(__filename).href : (document.currentScript && document.currentScript.src || new URL('index.cjs', document.baseURI).href))),p$1=e=>{try{return u(`${e}/package.json`).version}catch{return}},f=(e,r$1)=>{try{let n=c([r$1??"tsconfig.json","jsconfig.json"],r$1=>{let n=r.join(e,r$1);return e$2.existsSync(n)?n:void 0});if(!n)return;return JSON.parse(e$2.readFileSync(n,"utf-8"))}catch{return}},m$1=(e=0)=>r=>`\u001B[${r+e}m`,b=(e=0)=>r=>`\u001B[${38+e};5;${r}m`,g=(e=0)=>(r,t,o)=>`\u001B[${38+e};2;${r};${t};${o}m`,h={modifier:{reset:[0,0],bold:[1,22],dim:[2,22],italic:[3,23],underline:[4,24],overline:[53,55],inverse:[7,27],hidden:[8,28],strikethrough:[9,29]},color:{black:[30,39],red:[31,39],green:[32,39],yellow:[33,39],blue:[34,39],magenta:[35,39],cyan:[36,39],white:[37,39],blackBright:[90,39],gray:[90,39],grey:[90,39],redBright:[91,39],greenBright:[92,39],yellowBright:[93,39],blueBright:[94,39],magentaBright:[95,39],cyanBright:[96,39],whiteBright:[97,39]},bgColor:{bgBlack:[40,49],bgRed:[41,49],bgGreen:[42,49],bgYellow:[43,49],bgBlue:[44,49],bgMagenta:[45,49],bgCyan:[46,49],bgWhite:[47,49],bgBlackBright:[100,49],bgGray:[100,49],bgGrey:[100,49],bgRedBright:[101,49],bgGreenBright:[102,49],bgYellowBright:[103,49],bgBlueBright:[104,49],bgMagentaBright:[105,49],bgCyanBright:[106,49],bgWhiteBright:[107,49]}};Object.keys(h.modifier);let d$1=Object.keys(h.color),O=Object.keys(h.bgColor);[...d$1,...O];let y=function(){let e=new Map;for(let[r,t]of Object.entries(h)){for(let[r,o]of Object.entries(t))h[r]={open:`\u001B[${o[0]}m`,close:`\u001B[${o[1]}m`},t[r]=h[r],e.set(o[0],o[1]);Object.defineProperty(h,r,{value:t,enumerable:!1});}return Object.defineProperty(h,"codes",{value:e,enumerable:!1}),h.color.close="\x1b[39m",h.bgColor.close="\x1b[49m",h.color.ansi=m$1(),h.color.ansi256=b(),h.color.ansi16m=g(),h.bgColor.ansi=m$1(10),h.bgColor.ansi256=b(10),h.bgColor.ansi16m=g(10),Object.defineProperties(h,{rgbToAnsi256:{value:(e,r,t)=>e===r&&r===t?e<8?16:e>248?231:Math.round((e-8)/247*24)+232:16+36*Math.round(e/255*5)+6*Math.round(r/255*5)+Math.round(t/255*5),enumerable:!1},hexToRgb:{value(e){let r=/[a-f\d]{6}|[a-f\d]{3}/i.exec(e.toString(16));if(!r)return [0,0,0];let[t]=r;3===t.length&&(t=[...t].map(e=>e+e).join(""));let o=Number.parseInt(t,16);return [o>>16&255,o>>8&255,255&o]},enumerable:!1},hexToAnsi256:{value:e=>h.rgbToAnsi256(...h.hexToRgb(e)),enumerable:!1},ansi256ToAnsi:{value(e){let r,t,o;if(e<8)return 30+e;if(e<16)return 90+(e-8);if(e>=232)t=r=((e-232)*10+8)/255,o=r;else {let n=(e-=16)%36;r=Math.floor(e/36)/5,t=Math.floor(n/6)/5,o=n%6/5;}let n=2*Math.max(r,t,o);if(0===n)return 30;let l=30+(Math.round(o)<<2|Math.round(t)<<1|Math.round(r));return 2===n&&(l+=60),l},enumerable:!1},rgbToAnsi:{value:(e,r,t)=>h.ansi256ToAnsi(h.rgbToAnsi256(e,r,t)),enumerable:!1},hexToAnsi:{value:e=>h.ansi256ToAnsi(h.hexToAnsi256(e)),enumerable:!1}}),h}();function v(e,r=globalThis.Deno?globalThis.Deno.args:n$1.argv){let t=e.startsWith("-")?"":1===e.length?"-":"--",o=r.indexOf(t+e),l=r.indexOf("--");return -1!==o&&(-1===l||o<l)}let{env:T}=n$1;function M(r,t={}){let o=function(r,{streamIsTTY:t,sniffFlags:o=!0}={}){let i=function(){if("FORCE_COLOR"in T)return "true"===T.FORCE_COLOR?1:"false"===T.FORCE_COLOR?0:0===T.FORCE_COLOR.length?1:Math.min(Number.parseInt(T.FORCE_COLOR,10),3)}();void 0!==i&&(e$1=i);let s=o?e$1:i;if(0===s)return 0;if(o){if(v("color=16m")||v("color=full")||v("color=truecolor"))return 3;if(v("color=256"))return 2}if("TF_BUILD"in T&&"AGENT_NAME"in T)return 1;if(r&&!t&&void 0===s)return 0;let a=s||0;if("dumb"===T.TERM)return a;if("win32"===n$1.platform){let e=l.release().split(".");return Number(e[0])>=10&&Number(e[2])>=10586?Number(e[2])>=14931?3:2:1}if("CI"in T)return "GITHUB_ACTIONS"in T||"GITEA_ACTIONS"in T?3:["TRAVIS","CIRCLECI","APPVEYOR","GITLAB_CI","BUILDKITE","DRONE"].some(e=>e in T)||"codeship"===T.CI_NAME?1:a;if("TEAMCITY_VERSION"in T)return /^(9\.(0*[1-9]\d*)\.|\d{2,}\.)/.test(T.TEAMCITY_VERSION)?1:0;if("truecolor"===T.COLORTERM||"xterm-kitty"===T.TERM)return 3;if("TERM_PROGRAM"in T){let e=Number.parseInt((T.TERM_PROGRAM_VERSION||"").split(".")[0],10);switch(T.TERM_PROGRAM){case"iTerm.app":return e>=3?3:2;case"Apple_Terminal":return 2}}return /-256(color)?$/i.test(T.TERM)?2:/^screen|^xterm|^vt100|^vt220|^rxvt|color|ansi|cygwin|linux/i.test(T.TERM)||"COLORTERM"in T?1:a}(r,{streamIsTTY:r&&r.isTTY,...t});return 0!==o&&{level:o,hasBasic:!0,has256:o>=2,has16m:o>=3}}v("no-color")||v("no-colors")||v("color=false")||v("color=never")?e$1=0:(v("color")||v("colors")||v("color=true")||v("color=always"))&&(e$1=1);let{stdout:j,stderr:R}={stdout:M({isTTY:i.isatty(1)}),stderr:M({isTTY:i.isatty(2)})},w=Symbol("GENERATOR"),C=Symbol("STYLER"),A=Symbol("IS_EMPTY"),E=["ansi","ansi","ansi256","ansi16m"],B=Object.create(null),S=(e,r={})=>{if(r.level&&!(Number.isInteger(r.level)&&r.level>=0&&r.level<=3))throw Error("The `level` option should be an integer from 0 to 3");let t=j?j.level:0;e.level=void 0===r.level?t:r.level;},x=e=>{let r=(...e)=>e.join(" ");return S(r,e),Object.setPrototypeOf(r,I.prototype),r};function I(e){return x(e)}for(let[e,r]of(Object.setPrototypeOf(I.prototype,Function.prototype),Object.entries(y)))B[e]={get(){let t=$(this,_(r.open,r.close,this[C]),this[A]);return Object.defineProperty(this,e,{value:t}),t}};B.visible={get(){let e=$(this,this[C],!0);return Object.defineProperty(this,"visible",{value:e}),e}};let P=(e,r,t,...o)=>"rgb"===e?"ansi16m"===r?y[t].ansi16m(...o):"ansi256"===r?y[t].ansi256(y.rgbToAnsi256(...o)):y[t].ansi(y.rgbToAnsi(...o)):"hex"===e?P("rgb",r,t,...y.hexToRgb(...o)):y[t][e](...o);for(let e of ["rgb","hex","ansi256"])B[e]={get(){let{level:r}=this;return function(...t){return $(this,_(P(e,E[r],"color",...t),y.color.close,this[C]),this[A])}}},B["bg"+e[0].toUpperCase()+e.slice(1)]={get(){let{level:r}=this;return function(...t){return $(this,_(P(e,E[r],"bgColor",...t),y.bgColor.close,this[C]),this[A])}}};let N=Object.defineProperties(()=>{},{...B,level:{enumerable:!0,get(){return this[w].level},set(e){this[w].level=e;}}}),_=(e,r,t)=>{let o,n;return void 0===t?(o=e,n=r):(o=t.openAll+e,n=r+t.closeAll),{open:e,close:r,openAll:o,closeAll:n,parent:t}},$=(e,r,t)=>{let o=(...e)=>k(o,1===e.length?""+e[0]:e.join(" "));return Object.setPrototypeOf(o,N),o[w]=e,o[C]=r,o[A]=t,o},k=(e,r)=>{if(e.level<=0||!r)return e[A]?"":r;let t=e[C];if(void 0===t)return r;let{openAll:o,closeAll:n}=t;if(r.includes("\x1b"))for(;void 0!==t;)r=function(e,r,t){let o=e.indexOf(r);if(-1===o)return e;let n=r.length,l=0,i="";do i+=e.slice(l,o)+r+t,l=o+n,o=e.indexOf(r,l);while(-1!==o)return i+e.slice(l)}(r,t.close,t.open),t=t.parent;let l=r.indexOf("\n");return -1!==l&&(r=function(e,r,t,o){let n=0,l="";do{let i="\r"===e[o-1];l+=e.slice(n,i?o-1:o)+r+(i?"\r\n":"\n")+t,n=o+1,o=e.indexOf("\n",n);}while(-1!==o)return l+e.slice(n)}(r,n,o,l)),o+r+n};Object.defineProperties(I.prototype,B);let L=x(void 0);x({level:R?R.level:0});let F=p$1("next"),G=!!F&&semver.gte(F,"13.4.1"),Y=(e,r=0)=>G?`- ${e} (pwa)`:`${e}${" ".repeat(r)}- (PWA)`,D={wait:Y(L.cyan("wait"),2),error:Y(L.red("error"),1),warn:Y(L.yellow("warn"),2),info:Y(L.cyan("info"),2)};var V=Object.freeze({__proto__:null,error:(...e)=>{console.error(D.error,...e);},info:(...e)=>{console.log(D.info,...e);},prefixes:D,wait:(...e)=>{console.log(D.wait,...e);},warn:(...e)=>{console.warn(D.warn,...e);}});let J=()=>{let e;for(let r of ["@swc/core","next/dist/build/swc"])try{e=require(r);break}catch{}if(!e)throw Error("Failed to resolve swc. Please install @swc/core if you haven't.");return e};module$1.createRequire((typeof document === 'undefined' ? require('u' + 'rl').pathToFileURL(__filename).href : (document.currentScript && document.currentScript.src || new URL('index.cjs', document.baseURI).href)));let q=async(e,r,t,o)=>{let{resolveSwc:n,useSwcMinify:l,...i}=t,s=()=>require("terser-webpack-plugin").terserMinify(e,r,i,o);if(l){let t,o;try{t=n();}catch{return s()}if(!t.minify)return s();let l={...i,compress:"boolean"==typeof i.compress?!!i.compress&&{}:{...i.compress},mangle:null==i.mangle||("boolean"==typeof i.mangle?i.mangle:{...i.mangle}),sourceMap:void 0};r&&(l.sourceMap=!0),l.compress&&(void 0===l.compress.ecma&&(l.compress.ecma=l.ecma),5===l.ecma&&void 0===l.compress.arrows&&(l.compress.arrows=!1));let[[a,c]]=Object.entries(e),u=await t.minify(c,l);return u.map&&((o=JSON.parse(u.map)).sources=[a],delete o.sourcesContent),{code:u.code,map:o}}return s()};var t = [{urlPattern:/^https:\/\/fonts\.(?:gstatic)\.com\/.*/i,handler:"CacheFirst",options:{cacheName:"google-fonts-webfonts",expiration:{maxEntries:4,maxAgeSeconds:31536e3}}},{urlPattern:/^https:\/\/fonts\.(?:googleapis)\.com\/.*/i,handler:"StaleWhileRevalidate",options:{cacheName:"google-fonts-stylesheets",expiration:{maxEntries:4,maxAgeSeconds:604800}}},{urlPattern:/\.(?:eot|otf|ttc|ttf|woff|woff2|font.css)$/i,handler:"StaleWhileRevalidate",options:{cacheName:"static-font-assets",expiration:{maxEntries:4,maxAgeSeconds:604800}}},{urlPattern:/\.(?:jpg|jpeg|gif|png|svg|ico|webp)$/i,handler:"StaleWhileRevalidate",options:{cacheName:"static-image-assets",expiration:{maxEntries:64,maxAgeSeconds:2592e3}}},{urlPattern:/\/_next\/static.+\.js$/i,handler:"CacheFirst",options:{cacheName:"next-static-js-assets",expiration:{maxEntries:64,maxAgeSeconds:86400}}},{urlPattern:/\/_next\/image\?url=.+$/i,handler:"StaleWhileRevalidate",options:{cacheName:"next-image",expiration:{maxEntries:64,maxAgeSeconds:86400}}},{urlPattern:/\.(?:mp3|wav|ogg)$/i,handler:"CacheFirst",options:{rangeRequests:!0,cacheName:"static-audio-assets",expiration:{maxEntries:32,maxAgeSeconds:86400}}},{urlPattern:/\.(?:mp4)$/i,handler:"CacheFirst",options:{rangeRequests:!0,cacheName:"static-video-assets",expiration:{maxEntries:32,maxAgeSeconds:86400}}},{urlPattern:/\.(?:js)$/i,handler:"StaleWhileRevalidate",options:{cacheName:"static-js-assets",expiration:{maxEntries:48,maxAgeSeconds:86400}}},{urlPattern:/\.(?:css|less)$/i,handler:"StaleWhileRevalidate",options:{cacheName:"static-style-assets",expiration:{maxEntries:32,maxAgeSeconds:86400}}},{urlPattern:/\/_next\/data\/.+\/.+\.json$/i,handler:"StaleWhileRevalidate",options:{cacheName:"next-data",expiration:{maxEntries:32,maxAgeSeconds:86400}}},{urlPattern:/\.(?:json|xml|csv)$/i,handler:"NetworkFirst",options:{cacheName:"static-data-assets",expiration:{maxEntries:32,maxAgeSeconds:86400}}},{urlPattern:({sameOrigin:e,url:{pathname:t}})=>!(!e||t.startsWith("/api/auth/"))&&!!t.startsWith("/api/"),handler:"NetworkFirst",method:"GET",options:{cacheName:"apis",expiration:{maxEntries:16,maxAgeSeconds:86400},networkTimeoutSeconds:10}},{urlPattern:({request:e,url:{pathname:t},sameOrigin:a})=>"1"===e.headers.get("RSC")&&"1"===e.headers.get("Next-Router-Prefetch")&&a&&!t.startsWith("/api/"),handler:"NetworkFirst",options:{cacheName:"pages-rsc-prefetch",expiration:{maxEntries:32,maxAgeSeconds:86400}}},{urlPattern:({request:e,url:{pathname:t},sameOrigin:a})=>"1"===e.headers.get("RSC")&&a&&!t.startsWith("/api/"),handler:"NetworkFirst",options:{cacheName:"pages-rsc",expiration:{maxEntries:32,maxAgeSeconds:86400}}},{urlPattern:({url:{pathname:e},sameOrigin:t})=>t&&!e.startsWith("/api/"),handler:"NetworkFirst",options:{cacheName:"pages",expiration:{maxEntries:32,maxAgeSeconds:86400}}},{urlPattern:({sameOrigin:e})=>!e,handler:"NetworkFirst",options:{cacheName:"cross-origin",expiration:{maxEntries:32,maxAgeSeconds:3600},networkTimeoutSeconds:10}}];const resolveWorkboxCommon=({dest:e,sw:a,dev:r$1,buildId:n,buildExcludes:s,manifestEntries:i,manifestTransforms:l,modifyURLPrefix:o,publicPath:m})=>({swDest:r.join(e,a),additionalManifestEntries:r$1?[]:i,exclude:[...s,({asset:t})=>!!(t.name.startsWith("server/")||t.name.match(/^((app-|^)build-manifest\.json|react-loadable-manifest\.json)$/))||!!r$1&&!t.name.startsWith("static/runtime/")],modifyURLPrefix:{...o,"/_next/../public/":"/"},manifestTransforms:[...l,async(t,e)=>{let a=t.map(t=>{if(t.url=t.url.replace("/_next//static/image","/_next/static/image"),t.url=t.url.replace("/_next//static/media","/_next/static/media"),null===t.revision){let a=t.url;"string"==typeof m&&a.startsWith(m)&&(a=t.url.substring(m.length));let r=e.assetsInfo.get(a);t.revision=r&&r.contenthash||n;}return t.url=t.url.replace(/\[/g,"%5B").replace(/\]/g,"%5D"),t});return {manifest:a,warnings:[]}}]});
-const resolveRuntimeCaching=(o,n)=>{if(!o)return t;if(!n)return V.info("Custom runtimeCaching array found, using it instead of the default one."),o;V.info("Custom runtimeCaching array found, using it to extend the default one.");let a=[],i=new Set;for(let e of o)a.push(e),e.options?.cacheName&&i.add(e.options.cacheName);for(let e of t)e.options?.cacheName&&i.has(e.options.cacheName)||a.push(e);return a};const overrideAfterCalledMethod=e=>{Object.defineProperty(e,"alreadyCalled",{get:()=>!1,set(){}});};const isInjectManifestConfig=e=>void 0!==e&&"string"==typeof e.swSrc;const convertBoolean=(e,t=!0)=>{switch(typeof e){case"boolean":return e;case"number":case"bigint":return e>0;case"object":return null!==e;case"string":if(!t){if("false"===e||"0"===e)return !1;return !0}return "true"===e||"1"===e;case"function":case"symbol":return !0;case"undefined":return !1}};const getFileHash=r=>e$3.createHash("md5").update(e$2.readFileSync(r)).digest("hex");const getContentHash=(e,t)=>t?"development":getFileHash(e).slice(0,16);const resolveWorkboxPlugin=({rootDir:s,basePath:a,isDev:p,workboxCommon:l,workboxOptions:c,importScripts:u,extendDefaultRuntimeCaching:d,dynamicStartUrl:h,hasFallbacks:f})=>{if(isInjectManifestConfig(c)){let o=r.join(s,c.swSrc);V.info(`Using InjectManifest with ${o}`);let r$1=new t$1.InjectManifest({...l,...c,swSrc:o});return p&&overrideAfterCalledMethod(r$1),r$1}{let e;let{skipWaiting:r=!0,clientsClaim:s=!0,cleanupOutdatedCaches:m=!0,ignoreURLParametersMatching:g=[],importScripts:w,runtimeCaching:b}=c;w&&u.push(...w);let k=!1;p?(V.info("Building in development mode, caching and precaching are disabled for the most part. This means that offline support is disabled, but you can continue developing other functions in service worker."),g.push(/ts/),e=[{urlPattern:/.*/i,handler:"NetworkOnly",options:{cacheName:"dev"}}],k=!0):e=resolveRuntimeCaching(b,d),h&&e.unshift({urlPattern:a,handler:"NetworkFirst",options:{cacheName:"start-url",plugins:[{cacheWillUpdate:async({response:e})=>e&&"opaqueredirect"===e.type?new Response(e.body,{status:200,statusText:"OK",headers:e.headers}):e}]}}),f&&e.forEach(e=>{!e.options||e.options.precacheFallback||e.options.plugins?.find(e=>"handlerDidError"in e)||(e.options.plugins||(e.options.plugins=[]),e.options.plugins.push({handlerDidError:async({request:e})=>"undefined"!=typeof self?self.fallback(e):Response.error()}));});let y=new t$1.GenerateSW({...l,skipWaiting:r,clientsClaim:s,cleanupOutdatedCaches:m,ignoreURLParametersMatching:g,importScripts:u,...c,runtimeCaching:e});return k&&overrideAfterCalledMethod(y),y}};const defaultSwcRc={module:{type:"es6",lazy:!0,noInterop:!0},jsc:{parser:{syntax:"typescript",tsx:!0,dynamicImport:!0,decorators:!1},transform:{react:{runtime:"automatic"}},target:"es2022",loose:!1},minify:!1};let e=(t,e)=>{if(t)return e?.(t)};const NextPWAContext={shouldMinify:e(process.env.NEXT_PWA_MINIFY,convertBoolean),useSwcMinify:e(process.env.NEXT_PWA_SWC_MINIFY,convertBoolean)};const setDefaultContext=(t,e)=>{void 0===NextPWAContext[t]&&(NextPWAContext[t]=e);};let n=url.fileURLToPath(new URL(".",(typeof document === 'undefined' ? require('u' + 'rl').pathToFileURL(__filename).href : (document.currentScript && document.currentScript.src || new URL('index.cjs', document.baseURI).href)))),a=()=>({compress:{ecma:5,comparisons:!1,inline:2},mangle:{safari10:!0},format:{ecma:5,safari10:!0,comments:!1,ascii_only:!0},resolveSwc:J,useSwcMinify:NextPWAContext.useSwcMinify});const getSharedWebpackConfig=({swcRc:o=defaultSwcRc})=>{let i=NextPWAContext.shouldMinify&&{minimize:!0,minimizer:[new s({minify:q,terserOptions:a()})]};return {resolve:{extensions:[".js",".ts"],fallback:{module:!1,dgram:!1,dns:!1,path:!1,fs:!1,os:!1,crypto:!1,stream:!1,http2:!1,net:!1,tls:!1,zlib:!1,child_process:!1}},resolveLoader:{alias:{"swc-loader":r.join(n,"swc-loader.cjs")}},module:{rules:[{test:/\.(t|j)s$/i,use:[{loader:"swc-loader",options:o}]}]},optimization:i||void 0}};const buildCustomWorker=({isDev:c$1,baseDir:a,customWorkerSrc:f,customWorkerDest:d,customWorkerPrefix:j,plugins:h=[],tsconfig:w,basePath:k})=>{let $=c([f,r.join("src",f)],t=>{t=r.join(a,t);let e=["ts","js"].map(o=>r.join(t,`index.${o}`)).filter(r=>e$2.existsSync(r));if(0===e.length)return;let n=e[0];return e.length>1&&V.info(`More than one custom worker found, ${n} will be used.`),n});if(!$)return;V.info(`Found a custom worker implementation at ${$}.`),w&&w.compilerOptions&&w.compilerOptions.paths&&a$1(defaultSwcRc,r.join(a,w.compilerOptions.baseUrl??"."),w.compilerOptions.paths);let b=`${j}-${getContentHash($,c$1)}.js`;return V.info(`Building custom worker to ${r.join(d,b)}...`),n$2({...getSharedWebpackConfig({swcRc:defaultSwcRc}),mode:NextPWAContext.shouldMinify?"production":"development",target:"webworker",entry:{main:$},output:{path:d,filename:b,chunkFilename:"sw-chunks/[id]-[chunkhash].js"},plugins:[new cleanWebpackPlugin.CleanWebpackPlugin({cleanOnceBeforeBuildPatterns:[r.join(d,`${j}-*.js`),r.join(d,`${j}-*.js.map`)]}),...h]}).run((o,r)=>{(o||r?.hasErrors())&&(V.error("Failed to build custom worker."),V.error(r?.toString({colors:!0})),process.exit(-1));}),r.posix.join(k,b)};const getFallbackEnvs=({fallbacks:L,buildId:e})=>{let t=L.data;t&&t.endsWith(".json")&&(t=r.posix.join("/_next/data",e,t));let o={__PWA_FALLBACK_DOCUMENT__:L.document||!1,__PWA_FALLBACK_IMAGE__:L.image||!1,__PWA_FALLBACK_AUDIO__:L.audio||!1,__PWA_FALLBACK_VIDEO__:L.video||!1,__PWA_FALLBACK_FONT__:L.font||!1,__PWA_FALLBACK_DATA__:t||!1};if(0!==Object.values(o).filter(_=>!!_).length)return V.info("This app will fallback to these precached routes when fetching from the cache and the network fails:"),o.__PWA_FALLBACK_DOCUMENT__&&V.info(`  Documents (pages): ${o.__PWA_FALLBACK_DOCUMENT__}`),o.__PWA_FALLBACK_IMAGE__&&V.info(`  Images: ${o.__PWA_FALLBACK_IMAGE__}`),o.__PWA_FALLBACK_AUDIO__&&V.info(`  Audio: ${o.__PWA_FALLBACK_AUDIO__}`),o.__PWA_FALLBACK_VIDEO__&&V.info(`  Videos: ${o.__PWA_FALLBACK_VIDEO__}`),o.__PWA_FALLBACK_FONT__&&V.info(`  Fonts: ${o.__PWA_FALLBACK_FONT__}`),o.__PWA_FALLBACK_DATA__&&V.info(`  Data (/_next/data/**/*.json): ${o.__PWA_FALLBACK_DATA__}`),o};let m=url.fileURLToPath(new URL(".",(typeof document === 'undefined' ? require('u' + 'rl').pathToFileURL(__filename).href : (document.currentScript && document.currentScript.src || new URL('index.cjs', document.baseURI).href))));const buildFallbackWorker=({isDev:e,buildId:c,fallbacks:p,destDir:u,basePath:f})=>{p=Object.keys(p).reduce((e,o)=>{let t=p[o];return t&&(e[o]=r.posix.join(f,t)),e},{});let j=getFallbackEnvs({fallbacks:p,buildId:c});if(!j)return;let k=r.join(m,"fallback.js"),b=`fallback-${getContentHash(k,e)}.js`;return n$2({...getSharedWebpackConfig({}),mode:NextPWAContext.shouldMinify?"production":"development",target:"webworker",entry:{main:k},output:{path:u,filename:b,chunkFilename:"sw-chunks/[id]-[chunkhash].js"},plugins:[new cleanWebpackPlugin.CleanWebpackPlugin({cleanOnceBeforeBuildPatterns:[r.join(u,"fallback-*.js"),r.join(u,"fallback-*.js.map")]}),new n$2.EnvironmentPlugin(j)]}).run((r,e)=>{(r||e?.hasErrors())&&(V.error("Failed to build fallback worker."),V.error(e?.toString({colors:!0})),process.exit(-1));}),{name:r.posix.join(f,b),precaches:Object.values(j).filter(r=>!!r)}};let p=url.fileURLToPath(new URL(".",(typeof document === 'undefined' ? require('u' + 'rl').pathToFileURL(__filename).href : (document.currentScript && document.currentScript.src || new URL('index.cjs', document.baseURI).href))));const buildSWEntryWorker=({isDev:e,destDir:u,shouldGenSWEWorker:l,basePath:a})=>{if(!l)return;let w=r.join(p,"sw-entry-worker.js"),c=`swe-worker-${getContentHash(w,e)}.js`;return n$2({...getSharedWebpackConfig({}),mode:NextPWAContext.shouldMinify?"production":"development",target:"webworker",entry:{main:w},output:{path:u,filename:c,chunkFilename:"sw-chunks/[id]-[chunkhash].js"},plugins:[new cleanWebpackPlugin.CleanWebpackPlugin({cleanOnceBeforeBuildPatterns:[r.join(u,"swe-worker-*.js"),r.join(u,"swe-worker-*.js.map")]})]}).run((r,e)=>{(r||e?.hasErrors())&&(V.error("Failed to build the service worker's sub-worker."),V.error(e?.toString({colors:!0})),process.exit(-1));}),r.posix.join(a,c)};const getDefaultDocumentPage=(t,f,n)=>{let s;let r$1=c(["pages","src/pages"],o=>(o=r.join(t,o),e$2.existsSync(o)?o:void 0));if(n&&(s=c(["app","src/app"],o=>(o=r.join(t,o),e$2.existsSync(o)?o:void 0))),r$1||s)for(let o of f){if(s){let t=r.join(s,`~offline/page.${o}`);if(e$2.existsSync(t))return "/~offline"}if(r$1){let t=r.join(r$1,`_offline.${o}`);if(t&&e$2.existsSync(t))return "/_offline"}}};let d=url.fileURLToPath(new URL(".",(typeof document === 'undefined' ? require('u' + 'rl').pathToFileURL(__filename).href : (document.currentScript && document.currentScript.src || new URL('index.cjs', document.baseURI).href))));var index = ((e={})=>(t={})=>({...t,webpack(w,j){let h;try{h=require("next/dist/server/config-shared").defaultConfig;}catch{}let b=t.experimental?.appDir??h?.experimental?.appDir??!0,g=j.webpack,{buildId:k,dev:x,config:{distDir:y=".next",pageExtensions:A=["tsx","ts","jsx","js","mdx"]}}=j,v=j.config.basePath||"/",D=f(j.dir,t?.typescript?.tsconfigPath),{disable:P=!1,register:E=!0,dest:W=y,sw:$="sw.js",cacheStartUrl:S=!0,dynamicStartUrl:O=!0,dynamicStartUrlRedirect:R,publicExcludes:N=["!noprecache/**/*"],buildExcludes:C=[],fallbacks:L={},cacheOnFrontEndNav:M=!1,aggressiveFrontEndNavCaching:T=!1,reloadOnOnline:G=!0,scope:B=v,customWorkerDir:U,customWorkerSrc:F=U||"worker",customWorkerDest:H=W,customWorkerPrefix:I="worker",workboxOptions:Y={},extendDefaultRuntimeCaching:q=!1,swcMinify:K=t.swcMinify??h?.swcMinify??!1}=e;if("function"==typeof t.webpack&&(w=t.webpack(w,j)),P)return j.isServer&&V.info("PWA support is disabled."),w;let V$1=[];w.plugins||(w.plugins=[]),V.info(`Compiling for ${j.isServer?"server":"client (static)"}...`);let z=r.posix.join(v,$),J=r.posix.join(B,"/");w.plugins.push(new g.DefinePlugin({__PWA_SW__:`'${z}'`,__PWA_SCOPE__:`'${J}'`,__PWA_ENABLE_REGISTER__:`${!!E}`,__PWA_START_URL__:O?`'${v}'`:void 0,__PWA_CACHE_ON_FRONT_END_NAV__:`${!!M}`,__PWA_AGGRFEN_CACHE__:`${!!T}`,__PWA_RELOAD_ON_ONLINE__:`${!!G}`}));let Q=r.join(d,"sw-entry.js"),X=w.entry;if(w.entry=()=>X().then(i=>(i["main.js"]&&!i["main.js"].includes(Q)&&(Array.isArray(i["main.js"])?i["main.js"].unshift(Q):"string"==typeof i["main.js"]&&(i["main.js"]=[Q,i["main.js"]])),i["main-app"]&&!i["main-app"].includes(Q)&&(Array.isArray(i["main-app"])?i["main-app"].unshift(Q):"string"==typeof i["main-app"]&&(i["main-app"]=[Q,i["main-app"]])),i)),!j.isServer){setDefaultContext("shouldMinify",!x),setDefaultContext("useSwcMinify",K);let e=r.join(j.dir,W),o=r.join(j.dir,H),t=buildSWEntryWorker({isDev:x,destDir:e,shouldGenSWEWorker:M,basePath:v});w.plugins.push(new g.DefinePlugin({__PWA_SW_ENTRY_WORKER__:t&&`'${t}'`})),E||(V.info("Service worker won't be automatically registered as per the config, please call the following code in componentDidMount or useEffect:"),V.info("  window.workbox.register()"),D?.compilerOptions?.types?.includes("@ducanh2912/next-pwa/workbox")||V.info("You may also want to add @ducanh2912/next-pwa/workbox to compilerOptions.types in your tsconfig.json/jsconfig.json.")),V.info(`Service worker: ${r.join(e,$)}`),V.info(`  URL: ${z}`),V.info(`  Scope: ${J}`),w.plugins.push(new cleanWebpackPlugin.CleanWebpackPlugin({cleanOnceBeforeBuildPatterns:[r.join(e,"workbox-*.js"),r.join(e,"workbox-*.js.map"),r.join(e,$),r.join(e,`${$}.map`),r.join(e,"sw-chunks/**")]}));let d=buildCustomWorker({isDev:x,baseDir:j.dir,swDest:e,customWorkerSrc:F,customWorkerDest:o,customWorkerPrefix:I,plugins:w.plugins.filter(i=>i instanceof g.DefinePlugin),tsconfig:D,basePath:v});d&&V$1.unshift(d);let{additionalManifestEntries:h,modifyURLPrefix:y={},manifestTransforms:P=[],exclude:T,...G}=Y,B=h??[];B||(B=s$1.sync(["**/*","!workbox-*.js","!workbox-*.js.map","!worker-*.js","!worker-*.js.map","!fallback-*.js","!fallback-*.js.map",`!${$.replace(/^\/+/,"")}`,`!${$.replace(/^\/+/,"")}.map`,...N],{cwd:"public"}).map(e=>({url:r.posix.join(v,e),revision:getFileHash(`public/${e}`)}))),S&&(O?"string"==typeof R&&R.length>0&&B.push({url:R,revision:k}):B.push({url:v,revision:k})),Object.keys(G).forEach(i=>void 0===G[i]&&delete G[i]);let U=!1;if(L){L.document||(L.document=getDefaultDocumentPage(j.dir,A,b));let i=buildFallbackWorker({isDev:x,buildId:k,fallbacks:L,destDir:e,basePath:v});i&&(U=!0,V$1.unshift(i.name),i.precaches.forEach(i=>{i&&"boolean"!=typeof i&&!B.find(e=>"string"!=typeof e&&e.url.startsWith(i))&&B.push({url:i,revision:k});}));}let Q=resolveWorkboxCommon({dest:e,sw:$,dev:x,buildId:k,buildExcludes:C,manifestEntries:B,manifestTransforms:P,modifyURLPrefix:y,publicPath:w.output?.publicPath}),X=resolveWorkboxPlugin({rootDir:j.dir,basePath:v,isDev:x,workboxCommon:Q,workboxOptions:G,importScripts:V$1,extendDefaultRuntimeCaching:q,dynamicStartUrl:O,hasFallbacks:U});w.plugins.push(X);}return w}}));exports.default=index;exports.runtimeCaching=t;
\ No newline at end of file
+const resolveRuntimeCaching=(o,n)=>{if(!o)return t;if(!n)return V.info("Custom runtimeCaching array found, using it instead of the default one."),o;V.info("Custom runtimeCaching array found, using it to extend the default one.");let a=[],i=new Set;for(let e of o)a.push(e),e.options?.cacheName&&i.add(e.options.cacheName);for(let e of t)e.options?.cacheName&&i.has(e.options.cacheName)||a.push(e);return a};const overrideAfterCalledMethod=e=>{Object.defineProperty(e,"alreadyCalled",{get:()=>!1,set(){}});};const isInjectManifestConfig=e=>void 0!==e&&"string"==typeof e.swSrc;const convertBoolean=(e,t=!0)=>{switch(typeof e){case"boolean":return e;case"number":case"bigint":return e>0;case"object":return null!==e;case"string":if(!t){if("false"===e||"0"===e)return !1;return !0}return "true"===e||"1"===e;case"function":case"symbol":return !0;case"undefined":return !1}};const getFileHash=r=>e$3.createHash("md5").update(e$2.readFileSync(r)).digest("hex");const getContentHash=(e,t)=>t?"development":getFileHash(e).slice(0,16);const resolveWorkboxPlugin=({rootDir:s,basePath:a,isDev:p,workboxCommon:l,workboxOptions:c,importScripts:u,extendDefaultRuntimeCaching:d,dynamicStartUrl:h,hasFallbacks:f})=>{if(isInjectManifestConfig(c)){let o=r.join(s,c.swSrc);V.info(`Using InjectManifest with ${o}`);let r$1=new t$1.InjectManifest({...l,...c,swSrc:o});return p&&overrideAfterCalledMethod(r$1),r$1}{let e;let{skipWaiting:r=!0,clientsClaim:s=!0,cleanupOutdatedCaches:m=!0,ignoreURLParametersMatching:g=[],importScripts:w,runtimeCaching:b}=c;w&&u.push(...w);let k=!1;p?(V.info("Building in development mode, caching and precaching are disabled for the most part. This means that offline support is disabled, but you can continue developing other functions in service worker."),g.push(/ts/),e=[{urlPattern:/.*/i,handler:"NetworkOnly",options:{cacheName:"dev"}}],k=!0):e=resolveRuntimeCaching(b,d),h&&e.unshift({urlPattern:a,handler:"NetworkFirst",options:{cacheName:"start-url",plugins:[{cacheWillUpdate:async({response:e})=>e&&"opaqueredirect"===e.type?new Response(e.body,{status:200,statusText:"OK",headers:e.headers}):e}]}}),f&&e.forEach(e=>{!e.options||e.options.precacheFallback||e.options.plugins?.find(e=>"handlerDidError"in e)||(e.options.plugins||(e.options.plugins=[]),e.options.plugins.push({handlerDidError:async({request:e})=>"undefined"!=typeof self?self.fallback(e):Response.error()}));});let y=new t$1.GenerateSW({...l,skipWaiting:r,clientsClaim:s,cleanupOutdatedCaches:m,ignoreURLParametersMatching:g,importScripts:u,...c,runtimeCaching:e});return k&&overrideAfterCalledMethod(y),y}};const defaultSwcRc={module:{type:"es6",lazy:!0,noInterop:!0},jsc:{parser:{syntax:"typescript",tsx:!0,dynamicImport:!0,decorators:!1},transform:{react:{runtime:"automatic"}},target:"es2022",loose:!1},minify:!1};let e=(t,e)=>{if(t)return e?.(t)};const NextPWAContext={shouldMinify:e(process.env.NEXT_PWA_MINIFY,convertBoolean),useSwcMinify:e(process.env.NEXT_PWA_SWC_MINIFY,convertBoolean)};const setDefaultContext=(t,e)=>{void 0===NextPWAContext[t]&&(NextPWAContext[t]=e);};let n=url.fileURLToPath(new URL(".",(typeof document === 'undefined' ? require('u' + 'rl').pathToFileURL(__filename).href : (document.currentScript && document.currentScript.src || new URL('index.cjs', document.baseURI).href)))),a=()=>({compress:{ecma:5,comparisons:!1,inline:2},mangle:{safari10:!0},format:{ecma:5,safari10:!0,comments:!1,ascii_only:!0},resolveSwc:J,useSwcMinify:NextPWAContext.useSwcMinify});const getSharedWebpackConfig=({swcRc:o=defaultSwcRc})=>{let i=NextPWAContext.shouldMinify&&{minimize:!0,minimizer:[new s({minify:q,terserOptions:a()})]};return {resolve:{extensions:[".js",".ts"],fallback:{module:!1,dgram:!1,dns:!1,path:!1,fs:!1,os:!1,crypto:!1,stream:!1,http2:!1,net:!1,tls:!1,zlib:!1,child_process:!1}},resolveLoader:{alias:{"swc-loader":r.join(n,"swc-loader.cjs")}},module:{rules:[{test:/\.(t|j)s$/i,use:[{loader:"swc-loader",options:o}]},{test:/\.m?js$/,resolve:{fullySpecified:false}}]},optimization:i||void 0}};const buildCustomWorker=({isDev:c$1,baseDir:a,customWorkerSrc:f,customWorkerDest:d,customWorkerPrefix:j,plugins:h=[],tsconfig:w,basePath:k})=>{let $=c([f,r.join("src",f)],t=>{t=r.join(a,t);let e=["ts","js"].map(o=>r.join(t,`index.${o}`)).filter(r=>e$2.existsSync(r));if(0===e.length)return;let n=e[0];return e.length>1&&V.info(`More than one custom worker found, ${n} will be used.`),n});if(!$)return;V.info(`Found a custom worker implementation at ${$}.`),w&&w.compilerOptions&&w.compilerOptions.paths&&a$1(defaultSwcRc,r.join(a,w.compilerOptions.baseUrl??"."),w.compilerOptions.paths);let b=`${j}-${getContentHash($,c$1)}.js`;return V.info(`Building custom worker to ${r.join(d,b)}...`),n$2({...getSharedWebpackConfig({swcRc:defaultSwcRc}),mode:NextPWAContext.shouldMinify?"production":"development",target:"webworker",entry:{main:$},output:{path:d,filename:b,chunkFilename:"sw-chunks/[id]-[chunkhash].js"},plugins:[new cleanWebpackPlugin.CleanWebpackPlugin({cleanOnceBeforeBuildPatterns:[r.join(d,`${j}-*.js`),r.join(d,`${j}-*.js.map`)]}),...h]}).run((o,r)=>{(o||r?.hasErrors())&&(V.error("Failed to build custom worker."),V.error(r?.toString({colors:!0})),process.exit(-1));}),r.posix.join(k,b)};const getFallbackEnvs=({fallbacks:L,buildId:e})=>{let t=L.data;t&&t.endsWith(".json")&&(t=r.posix.join("/_next/data",e,t));let o={__PWA_FALLBACK_DOCUMENT__:L.document||!1,__PWA_FALLBACK_IMAGE__:L.image||!1,__PWA_FALLBACK_AUDIO__:L.audio||!1,__PWA_FALLBACK_VIDEO__:L.video||!1,__PWA_FALLBACK_FONT__:L.font||!1,__PWA_FALLBACK_DATA__:t||!1};if(0!==Object.values(o).filter(_=>!!_).length)return V.info("This app will fallback to these precached routes when fetching from the cache and the network fails:"),o.__PWA_FALLBACK_DOCUMENT__&&V.info(`  Documents (pages): ${o.__PWA_FALLBACK_DOCUMENT__}`),o.__PWA_FALLBACK_IMAGE__&&V.info(`  Images: ${o.__PWA_FALLBACK_IMAGE__}`),o.__PWA_FALLBACK_AUDIO__&&V.info(`  Audio: ${o.__PWA_FALLBACK_AUDIO__}`),o.__PWA_FALLBACK_VIDEO__&&V.info(`  Videos: ${o.__PWA_FALLBACK_VIDEO__}`),o.__PWA_FALLBACK_FONT__&&V.info(`  Fonts: ${o.__PWA_FALLBACK_FONT__}`),o.__PWA_FALLBACK_DATA__&&V.info(`  Data (/_next/data/**/*.json): ${o.__PWA_FALLBACK_DATA__}`),o};let m=url.fileURLToPath(new URL(".",(typeof document === 'undefined' ? require('u' + 'rl').pathToFileURL(__filename).href : (document.currentScript && document.currentScript.src || new URL('index.cjs', document.baseURI).href))));const buildFallbackWorker=({isDev:e,buildId:c,fallbacks:p,destDir:u,basePath:f})=>{p=Object.keys(p).reduce((e,o)=>{let t=p[o];return t&&(e[o]=r.posix.join(f,t)),e},{});let j=getFallbackEnvs({fallbacks:p,buildId:c});if(!j)return;let k=r.join(m,"fallback.js"),b=`fallback-${getContentHash(k,e)}.js`;return n$2({...getSharedWebpackConfig({}),mode:NextPWAContext.shouldMinify?"production":"development",target:"webworker",entry:{main:k},output:{path:u,filename:b,chunkFilename:"sw-chunks/[id]-[chunkhash].js"},plugins:[new cleanWebpackPlugin.CleanWebpackPlugin({cleanOnceBeforeBuildPatterns:[r.join(u,"fallback-*.js"),r.join(u,"fallback-*.js.map")]}),new n$2.EnvironmentPlugin(j)]}).run((r,e)=>{(r||e?.hasErrors())&&(V.error("Failed to build fallback worker."),V.error(e?.toString({colors:!0})),process.exit(-1));}),{name:r.posix.join(f,b),precaches:Object.values(j).filter(r=>!!r)}};let p=url.fileURLToPath(new URL(".",(typeof document === 'undefined' ? require('u' + 'rl').pathToFileURL(__filename).href : (document.currentScript && document.currentScript.src || new URL('index.cjs', document.baseURI).href))));const buildSWEntryWorker=({isDev:e,destDir:u,shouldGenSWEWorker:l,basePath:a})=>{if(!l)return;let w=r.join(p,"sw-entry-worker.js"),c=`swe-worker-${getContentHash(w,e)}.js`;return n$2({...getSharedWebpackConfig({}),mode:NextPWAContext.shouldMinify?"production":"development",target:"webworker",entry:{main:w},output:{path:u,filename:c,chunkFilename:"sw-chunks/[id]-[chunkhash].js"},plugins:[new cleanWebpackPlugin.CleanWebpackPlugin({cleanOnceBeforeBuildPatterns:[r.join(u,"swe-worker-*.js"),r.join(u,"swe-worker-*.js.map")]})]}).run((r,e)=>{(r||e?.hasErrors())&&(V.error("Failed to build the service worker's sub-worker."),V.error(e?.toString({colors:!0})),process.exit(-1));}),r.posix.join(a,c)};const getDefaultDocumentPage=(t,f,n)=>{let s;let r$1=c(["pages","src/pages"],o=>(o=r.join(t,o),e$2.existsSync(o)?o:void 0));if(n&&(s=c(["app","src/app"],o=>(o=r.join(t,o),e$2.existsSync(o)?o:void 0))),r$1||s)for(let o of f){if(s){let t=r.join(s,`~offline/page.${o}`);if(e$2.existsSync(t))return "/~offline"}if(r$1){let t=r.join(r$1,`_offline.${o}`);if(t&&e$2.existsSync(t))return "/_offline"}}};let d=url.fileURLToPath(new URL(".",(typeof document === 'undefined' ? require('u' + 'rl').pathToFileURL(__filename).href : (document.currentScript && document.currentScript.src || new URL('index.cjs', document.baseURI).href))));var index = ((e={})=>(t={})=>({...t,webpack(w,j){let h;try{h=require("next/dist/server/config-shared").defaultConfig;}catch{}let b=t.experimental?.appDir??h?.experimental?.appDir??!0,g=j.webpack,{buildId:k,dev:x,config:{distDir:y=".next",pageExtensions:A=["tsx","ts","jsx","js","mdx"]}}=j,v=j.config.basePath||"/",D=f(j.dir,t?.typescript?.tsconfigPath),{disable:P=!1,register:E=!0,dest:W=y,sw:$="sw.js",cacheStartUrl:S=!0,dynamicStartUrl:O=!0,dynamicStartUrlRedirect:R,publicExcludes:N=["!noprecache/**/*"],buildExcludes:C=[],fallbacks:L={},cacheOnFrontEndNav:M=!1,aggressiveFrontEndNavCaching:T=!1,reloadOnOnline:G=!0,scope:B=v,customWorkerDir:U,customWorkerSrc:F=U||"worker",customWorkerDest:H=W,customWorkerPrefix:I="worker",workboxOptions:Y={},extendDefaultRuntimeCaching:q=!1,swcMinify:K=t.swcMinify??h?.swcMinify??!1}=e;if("function"==typeof t.webpack&&(w=t.webpack(w,j)),P)return j.isServer&&V.info("PWA support is disabled."),w;let V$1=[];w.plugins||(w.plugins=[]),V.info(`Compiling for ${j.isServer?"server":"client (static)"}...`);let z=r.posix.join(v,$),J=r.posix.join(B,"/");w.plugins.push(new g.DefinePlugin({__PWA_SW__:`'${z}'`,__PWA_SCOPE__:`'${J}'`,__PWA_ENABLE_REGISTER__:`${!!E}`,__PWA_START_URL__:O?`'${v}'`:void 0,__PWA_CACHE_ON_FRONT_END_NAV__:`${!!M}`,__PWA_AGGRFEN_CACHE__:`${!!T}`,__PWA_RELOAD_ON_ONLINE__:`${!!G}`}));let Q=r.join(d,"sw-entry.js"),X=w.entry;if(w.entry=()=>X().then(i=>(i["main.js"]&&!i["main.js"].includes(Q)&&(Array.isArray(i["main.js"])?i["main.js"].unshift(Q):"string"==typeof i["main.js"]&&(i["main.js"]=[Q,i["main.js"]])),i["main-app"]&&!i["main-app"].includes(Q)&&(Array.isArray(i["main-app"])?i["main-app"].unshift(Q):"string"==typeof i["main-app"]&&(i["main-app"]=[Q,i["main-app"]])),i)),!j.isServer){setDefaultContext("shouldMinify",!x),setDefaultContext("useSwcMinify",K);let e=r.join(j.dir,W),o=r.join(j.dir,H),t=buildSWEntryWorker({isDev:x,destDir:e,shouldGenSWEWorker:M,basePath:v});w.plugins.push(new g.DefinePlugin({__PWA_SW_ENTRY_WORKER__:t&&`'${t}'`})),E||(V.info("Service worker won't be automatically registered as per the config, please call the following code in componentDidMount or useEffect:"),V.info("  window.workbox.register()"),D?.compilerOptions?.types?.includes("@ducanh2912/next-pwa/workbox")||V.info("You may also want to add @ducanh2912/next-pwa/workbox to compilerOptions.types in your tsconfig.json/jsconfig.json.")),V.info(`Service worker: ${r.join(e,$)}`),V.info(`  URL: ${z}`),V.info(`  Scope: ${J}`),w.plugins.push(new cleanWebpackPlugin.CleanWebpackPlugin({cleanOnceBeforeBuildPatterns:[r.join(e,"workbox-*.js"),r.join(e,"workbox-*.js.map"),r.join(e,$),r.join(e,`${$}.map`),r.join(e,"sw-chunks/**")]}));let d=buildCustomWorker({isDev:x,baseDir:j.dir,swDest:e,customWorkerSrc:F,customWorkerDest:o,customWorkerPrefix:I,plugins:w.plugins.filter(i=>i instanceof g.DefinePlugin),tsconfig:D,basePath:v});d&&V$1.unshift(d);let{additionalManifestEntries:h,modifyURLPrefix:y={},manifestTransforms:P=[],exclude:T,...G}=Y,B=h??[];B||(B=s$1.sync(["**/*","!workbox-*.js","!workbox-*.js.map","!worker-*.js","!worker-*.js.map","!fallback-*.js","!fallback-*.js.map",`!${$.replace(/^\/+/,"")}`,`!${$.replace(/^\/+/,"")}.map`,...N],{cwd:"public"}).map(e=>({url:r.posix.join(v,e),revision:getFileHash(`public/${e}`)}))),S&&(O?"string"==typeof R&&R.length>0&&B.push({url:R,revision:k}):B.push({url:v,revision:k})),Object.keys(G).forEach(i=>void 0===G[i]&&delete G[i]);let U=!1;if(L){L.document||(L.document=getDefaultDocumentPage(j.dir,A,b));let i=buildFallbackWorker({isDev:x,buildId:k,fallbacks:L,destDir:e,basePath:v});i&&(U=!0,V$1.unshift(i.name),i.precaches.forEach(i=>{i&&"boolean"!=typeof i&&!B.find(e=>"string"!=typeof e&&e.url.startsWith(i))&&B.push({url:i,revision:k});}));}let Q=resolveWorkboxCommon({dest:e,sw:$,dev:x,buildId:k,buildExcludes:C,manifestEntries:B,manifestTransforms:P,modifyURLPrefix:y,publicPath:w.output?.publicPath}),X=resolveWorkboxPlugin({rootDir:j.dir,basePath:v,isDev:x,workboxCommon:Q,workboxOptions:G,importScripts:V$1,extendDefaultRuntimeCaching:q,dynamicStartUrl:O,hasFallbacks:U});w.plugins.push(X);}return w}}));exports.default=index;exports.runtimeCaching=t;
\ No newline at end of file
diff --git a/node_modules/@ducanh2912/next-pwa/dist/index.module.js b/node_modules/@ducanh2912/next-pwa/dist/index.module.js
index 4389609..82ce509 100644
--- a/node_modules/@ducanh2912/next-pwa/dist/index.module.js
+++ b/node_modules/@ducanh2912/next-pwa/dist/index.module.js
@@ -1,2 +1,2 @@
 import r from'path';import {fileURLToPath}from'url';import {createRequire}from'module';import e$2 from'fs';import n$1 from'process';import l from'os';import i from'tty';import {gte}from'semver';import {CleanWebpackPlugin}from'clean-webpack-plugin';import s$1 from'fast-glob';import t$1 from'workbox-webpack-plugin';import e$3 from'crypto';import n$2 from'webpack';import s from'terser-webpack-plugin';let e$1;let a$1=(e,r,t)=>{e.jsc||(e.jsc={}),e.jsc.baseUrl=r,e.jsc.paths=t;},c=(e,r)=>{for(let t of e){let e=r(t);if(e)return e}},u=createRequire(import.meta.url),p$1=e=>{try{return u(`${e}/package.json`).version}catch{return}},f=(e,r$1)=>{try{let n=c([r$1??"tsconfig.json","jsconfig.json"],r$1=>{let n=r.join(e,r$1);return e$2.existsSync(n)?n:void 0});if(!n)return;return JSON.parse(e$2.readFileSync(n,"utf-8"))}catch{return}},m$1=(e=0)=>r=>`\u001B[${r+e}m`,b=(e=0)=>r=>`\u001B[${38+e};5;${r}m`,g=(e=0)=>(r,t,o)=>`\u001B[${38+e};2;${r};${t};${o}m`,h={modifier:{reset:[0,0],bold:[1,22],dim:[2,22],italic:[3,23],underline:[4,24],overline:[53,55],inverse:[7,27],hidden:[8,28],strikethrough:[9,29]},color:{black:[30,39],red:[31,39],green:[32,39],yellow:[33,39],blue:[34,39],magenta:[35,39],cyan:[36,39],white:[37,39],blackBright:[90,39],gray:[90,39],grey:[90,39],redBright:[91,39],greenBright:[92,39],yellowBright:[93,39],blueBright:[94,39],magentaBright:[95,39],cyanBright:[96,39],whiteBright:[97,39]},bgColor:{bgBlack:[40,49],bgRed:[41,49],bgGreen:[42,49],bgYellow:[43,49],bgBlue:[44,49],bgMagenta:[45,49],bgCyan:[46,49],bgWhite:[47,49],bgBlackBright:[100,49],bgGray:[100,49],bgGrey:[100,49],bgRedBright:[101,49],bgGreenBright:[102,49],bgYellowBright:[103,49],bgBlueBright:[104,49],bgMagentaBright:[105,49],bgCyanBright:[106,49],bgWhiteBright:[107,49]}};Object.keys(h.modifier);let d$1=Object.keys(h.color),O=Object.keys(h.bgColor);[...d$1,...O];let y=function(){let e=new Map;for(let[r,t]of Object.entries(h)){for(let[r,o]of Object.entries(t))h[r]={open:`\u001B[${o[0]}m`,close:`\u001B[${o[1]}m`},t[r]=h[r],e.set(o[0],o[1]);Object.defineProperty(h,r,{value:t,enumerable:!1});}return Object.defineProperty(h,"codes",{value:e,enumerable:!1}),h.color.close="\x1b[39m",h.bgColor.close="\x1b[49m",h.color.ansi=m$1(),h.color.ansi256=b(),h.color.ansi16m=g(),h.bgColor.ansi=m$1(10),h.bgColor.ansi256=b(10),h.bgColor.ansi16m=g(10),Object.defineProperties(h,{rgbToAnsi256:{value:(e,r,t)=>e===r&&r===t?e<8?16:e>248?231:Math.round((e-8)/247*24)+232:16+36*Math.round(e/255*5)+6*Math.round(r/255*5)+Math.round(t/255*5),enumerable:!1},hexToRgb:{value(e){let r=/[a-f\d]{6}|[a-f\d]{3}/i.exec(e.toString(16));if(!r)return [0,0,0];let[t]=r;3===t.length&&(t=[...t].map(e=>e+e).join(""));let o=Number.parseInt(t,16);return [o>>16&255,o>>8&255,255&o]},enumerable:!1},hexToAnsi256:{value:e=>h.rgbToAnsi256(...h.hexToRgb(e)),enumerable:!1},ansi256ToAnsi:{value(e){let r,t,o;if(e<8)return 30+e;if(e<16)return 90+(e-8);if(e>=232)t=r=((e-232)*10+8)/255,o=r;else {let n=(e-=16)%36;r=Math.floor(e/36)/5,t=Math.floor(n/6)/5,o=n%6/5;}let n=2*Math.max(r,t,o);if(0===n)return 30;let l=30+(Math.round(o)<<2|Math.round(t)<<1|Math.round(r));return 2===n&&(l+=60),l},enumerable:!1},rgbToAnsi:{value:(e,r,t)=>h.ansi256ToAnsi(h.rgbToAnsi256(e,r,t)),enumerable:!1},hexToAnsi:{value:e=>h.ansi256ToAnsi(h.hexToAnsi256(e)),enumerable:!1}}),h}();function v(e,r=globalThis.Deno?globalThis.Deno.args:n$1.argv){let t=e.startsWith("-")?"":1===e.length?"-":"--",o=r.indexOf(t+e),l=r.indexOf("--");return -1!==o&&(-1===l||o<l)}let{env:T}=n$1;function M(r,t={}){let o=function(r,{streamIsTTY:t,sniffFlags:o=!0}={}){let i=function(){if("FORCE_COLOR"in T)return "true"===T.FORCE_COLOR?1:"false"===T.FORCE_COLOR?0:0===T.FORCE_COLOR.length?1:Math.min(Number.parseInt(T.FORCE_COLOR,10),3)}();void 0!==i&&(e$1=i);let s=o?e$1:i;if(0===s)return 0;if(o){if(v("color=16m")||v("color=full")||v("color=truecolor"))return 3;if(v("color=256"))return 2}if("TF_BUILD"in T&&"AGENT_NAME"in T)return 1;if(r&&!t&&void 0===s)return 0;let a=s||0;if("dumb"===T.TERM)return a;if("win32"===n$1.platform){let e=l.release().split(".");return Number(e[0])>=10&&Number(e[2])>=10586?Number(e[2])>=14931?3:2:1}if("CI"in T)return "GITHUB_ACTIONS"in T||"GITEA_ACTIONS"in T?3:["TRAVIS","CIRCLECI","APPVEYOR","GITLAB_CI","BUILDKITE","DRONE"].some(e=>e in T)||"codeship"===T.CI_NAME?1:a;if("TEAMCITY_VERSION"in T)return /^(9\.(0*[1-9]\d*)\.|\d{2,}\.)/.test(T.TEAMCITY_VERSION)?1:0;if("truecolor"===T.COLORTERM||"xterm-kitty"===T.TERM)return 3;if("TERM_PROGRAM"in T){let e=Number.parseInt((T.TERM_PROGRAM_VERSION||"").split(".")[0],10);switch(T.TERM_PROGRAM){case"iTerm.app":return e>=3?3:2;case"Apple_Terminal":return 2}}return /-256(color)?$/i.test(T.TERM)?2:/^screen|^xterm|^vt100|^vt220|^rxvt|color|ansi|cygwin|linux/i.test(T.TERM)||"COLORTERM"in T?1:a}(r,{streamIsTTY:r&&r.isTTY,...t});return 0!==o&&{level:o,hasBasic:!0,has256:o>=2,has16m:o>=3}}v("no-color")||v("no-colors")||v("color=false")||v("color=never")?e$1=0:(v("color")||v("colors")||v("color=true")||v("color=always"))&&(e$1=1);let{stdout:j,stderr:R}={stdout:M({isTTY:i.isatty(1)}),stderr:M({isTTY:i.isatty(2)})},w=Symbol("GENERATOR"),C=Symbol("STYLER"),A=Symbol("IS_EMPTY"),E=["ansi","ansi","ansi256","ansi16m"],B=Object.create(null),S=(e,r={})=>{if(r.level&&!(Number.isInteger(r.level)&&r.level>=0&&r.level<=3))throw Error("The `level` option should be an integer from 0 to 3");let t=j?j.level:0;e.level=void 0===r.level?t:r.level;},x=e=>{let r=(...e)=>e.join(" ");return S(r,e),Object.setPrototypeOf(r,I.prototype),r};function I(e){return x(e)}for(let[e,r]of(Object.setPrototypeOf(I.prototype,Function.prototype),Object.entries(y)))B[e]={get(){let t=$(this,_(r.open,r.close,this[C]),this[A]);return Object.defineProperty(this,e,{value:t}),t}};B.visible={get(){let e=$(this,this[C],!0);return Object.defineProperty(this,"visible",{value:e}),e}};let P=(e,r,t,...o)=>"rgb"===e?"ansi16m"===r?y[t].ansi16m(...o):"ansi256"===r?y[t].ansi256(y.rgbToAnsi256(...o)):y[t].ansi(y.rgbToAnsi(...o)):"hex"===e?P("rgb",r,t,...y.hexToRgb(...o)):y[t][e](...o);for(let e of ["rgb","hex","ansi256"])B[e]={get(){let{level:r}=this;return function(...t){return $(this,_(P(e,E[r],"color",...t),y.color.close,this[C]),this[A])}}},B["bg"+e[0].toUpperCase()+e.slice(1)]={get(){let{level:r}=this;return function(...t){return $(this,_(P(e,E[r],"bgColor",...t),y.bgColor.close,this[C]),this[A])}}};let N=Object.defineProperties(()=>{},{...B,level:{enumerable:!0,get(){return this[w].level},set(e){this[w].level=e;}}}),_=(e,r,t)=>{let o,n;return void 0===t?(o=e,n=r):(o=t.openAll+e,n=r+t.closeAll),{open:e,close:r,openAll:o,closeAll:n,parent:t}},$=(e,r,t)=>{let o=(...e)=>k(o,1===e.length?""+e[0]:e.join(" "));return Object.setPrototypeOf(o,N),o[w]=e,o[C]=r,o[A]=t,o},k=(e,r)=>{if(e.level<=0||!r)return e[A]?"":r;let t=e[C];if(void 0===t)return r;let{openAll:o,closeAll:n}=t;if(r.includes("\x1b"))for(;void 0!==t;)r=function(e,r,t){let o=e.indexOf(r);if(-1===o)return e;let n=r.length,l=0,i="";do i+=e.slice(l,o)+r+t,l=o+n,o=e.indexOf(r,l);while(-1!==o)return i+e.slice(l)}(r,t.close,t.open),t=t.parent;let l=r.indexOf("\n");return -1!==l&&(r=function(e,r,t,o){let n=0,l="";do{let i="\r"===e[o-1];l+=e.slice(n,i?o-1:o)+r+(i?"\r\n":"\n")+t,n=o+1,o=e.indexOf("\n",n);}while(-1!==o)return l+e.slice(n)}(r,n,o,l)),o+r+n};Object.defineProperties(I.prototype,B);let L=x(void 0);x({level:R?R.level:0});let F=p$1("next"),G=!!F&&gte(F,"13.4.1"),Y=(e,r=0)=>G?`- ${e} (pwa)`:`${e}${" ".repeat(r)}- (PWA)`,D={wait:Y(L.cyan("wait"),2),error:Y(L.red("error"),1),warn:Y(L.yellow("warn"),2),info:Y(L.cyan("info"),2)};var V=Object.freeze({__proto__:null,error:(...e)=>{console.error(D.error,...e);},info:(...e)=>{console.log(D.info,...e);},prefixes:D,wait:(...e)=>{console.log(D.wait,...e);},warn:(...e)=>{console.warn(D.warn,...e);}});let J=()=>{let e;for(let r of ["@swc/core","next/dist/build/swc"])try{e=require(r);break}catch{}if(!e)throw Error("Failed to resolve swc. Please install @swc/core if you haven't.");return e};createRequire(import.meta.url);let q=async(e,r,t,o)=>{let{resolveSwc:n,useSwcMinify:l,...i}=t,s=()=>require("terser-webpack-plugin").terserMinify(e,r,i,o);if(l){let t,o;try{t=n();}catch{return s()}if(!t.minify)return s();let l={...i,compress:"boolean"==typeof i.compress?!!i.compress&&{}:{...i.compress},mangle:null==i.mangle||("boolean"==typeof i.mangle?i.mangle:{...i.mangle}),sourceMap:void 0};r&&(l.sourceMap=!0),l.compress&&(void 0===l.compress.ecma&&(l.compress.ecma=l.ecma),5===l.ecma&&void 0===l.compress.arrows&&(l.compress.arrows=!1));let[[a,c]]=Object.entries(e),u=await t.minify(c,l);return u.map&&((o=JSON.parse(u.map)).sources=[a],delete o.sourcesContent),{code:u.code,map:o}}return s()};var t = [{urlPattern:/^https:\/\/fonts\.(?:gstatic)\.com\/.*/i,handler:"CacheFirst",options:{cacheName:"google-fonts-webfonts",expiration:{maxEntries:4,maxAgeSeconds:31536e3}}},{urlPattern:/^https:\/\/fonts\.(?:googleapis)\.com\/.*/i,handler:"StaleWhileRevalidate",options:{cacheName:"google-fonts-stylesheets",expiration:{maxEntries:4,maxAgeSeconds:604800}}},{urlPattern:/\.(?:eot|otf|ttc|ttf|woff|woff2|font.css)$/i,handler:"StaleWhileRevalidate",options:{cacheName:"static-font-assets",expiration:{maxEntries:4,maxAgeSeconds:604800}}},{urlPattern:/\.(?:jpg|jpeg|gif|png|svg|ico|webp)$/i,handler:"StaleWhileRevalidate",options:{cacheName:"static-image-assets",expiration:{maxEntries:64,maxAgeSeconds:2592e3}}},{urlPattern:/\/_next\/static.+\.js$/i,handler:"CacheFirst",options:{cacheName:"next-static-js-assets",expiration:{maxEntries:64,maxAgeSeconds:86400}}},{urlPattern:/\/_next\/image\?url=.+$/i,handler:"StaleWhileRevalidate",options:{cacheName:"next-image",expiration:{maxEntries:64,maxAgeSeconds:86400}}},{urlPattern:/\.(?:mp3|wav|ogg)$/i,handler:"CacheFirst",options:{rangeRequests:!0,cacheName:"static-audio-assets",expiration:{maxEntries:32,maxAgeSeconds:86400}}},{urlPattern:/\.(?:mp4)$/i,handler:"CacheFirst",options:{rangeRequests:!0,cacheName:"static-video-assets",expiration:{maxEntries:32,maxAgeSeconds:86400}}},{urlPattern:/\.(?:js)$/i,handler:"StaleWhileRevalidate",options:{cacheName:"static-js-assets",expiration:{maxEntries:48,maxAgeSeconds:86400}}},{urlPattern:/\.(?:css|less)$/i,handler:"StaleWhileRevalidate",options:{cacheName:"static-style-assets",expiration:{maxEntries:32,maxAgeSeconds:86400}}},{urlPattern:/\/_next\/data\/.+\/.+\.json$/i,handler:"StaleWhileRevalidate",options:{cacheName:"next-data",expiration:{maxEntries:32,maxAgeSeconds:86400}}},{urlPattern:/\.(?:json|xml|csv)$/i,handler:"NetworkFirst",options:{cacheName:"static-data-assets",expiration:{maxEntries:32,maxAgeSeconds:86400}}},{urlPattern:({sameOrigin:e,url:{pathname:t}})=>!(!e||t.startsWith("/api/auth/"))&&!!t.startsWith("/api/"),handler:"NetworkFirst",method:"GET",options:{cacheName:"apis",expiration:{maxEntries:16,maxAgeSeconds:86400},networkTimeoutSeconds:10}},{urlPattern:({request:e,url:{pathname:t},sameOrigin:a})=>"1"===e.headers.get("RSC")&&"1"===e.headers.get("Next-Router-Prefetch")&&a&&!t.startsWith("/api/"),handler:"NetworkFirst",options:{cacheName:"pages-rsc-prefetch",expiration:{maxEntries:32,maxAgeSeconds:86400}}},{urlPattern:({request:e,url:{pathname:t},sameOrigin:a})=>"1"===e.headers.get("RSC")&&a&&!t.startsWith("/api/"),handler:"NetworkFirst",options:{cacheName:"pages-rsc",expiration:{maxEntries:32,maxAgeSeconds:86400}}},{urlPattern:({url:{pathname:e},sameOrigin:t})=>t&&!e.startsWith("/api/"),handler:"NetworkFirst",options:{cacheName:"pages",expiration:{maxEntries:32,maxAgeSeconds:86400}}},{urlPattern:({sameOrigin:e})=>!e,handler:"NetworkFirst",options:{cacheName:"cross-origin",expiration:{maxEntries:32,maxAgeSeconds:3600},networkTimeoutSeconds:10}}];const resolveWorkboxCommon=({dest:e,sw:a,dev:r$1,buildId:n,buildExcludes:s,manifestEntries:i,manifestTransforms:l,modifyURLPrefix:o,publicPath:m})=>({swDest:r.join(e,a),additionalManifestEntries:r$1?[]:i,exclude:[...s,({asset:t})=>!!(t.name.startsWith("server/")||t.name.match(/^((app-|^)build-manifest\.json|react-loadable-manifest\.json)$/))||!!r$1&&!t.name.startsWith("static/runtime/")],modifyURLPrefix:{...o,"/_next/../public/":"/"},manifestTransforms:[...l,async(t,e)=>{let a=t.map(t=>{if(t.url=t.url.replace("/_next//static/image","/_next/static/image"),t.url=t.url.replace("/_next//static/media","/_next/static/media"),null===t.revision){let a=t.url;"string"==typeof m&&a.startsWith(m)&&(a=t.url.substring(m.length));let r=e.assetsInfo.get(a);t.revision=r&&r.contenthash||n;}return t.url=t.url.replace(/\[/g,"%5B").replace(/\]/g,"%5D"),t});return {manifest:a,warnings:[]}}]});
-const resolveRuntimeCaching=(o,n)=>{if(!o)return t;if(!n)return V.info("Custom runtimeCaching array found, using it instead of the default one."),o;V.info("Custom runtimeCaching array found, using it to extend the default one.");let a=[],i=new Set;for(let e of o)a.push(e),e.options?.cacheName&&i.add(e.options.cacheName);for(let e of t)e.options?.cacheName&&i.has(e.options.cacheName)||a.push(e);return a};const overrideAfterCalledMethod=e=>{Object.defineProperty(e,"alreadyCalled",{get:()=>!1,set(){}});};const isInjectManifestConfig=e=>void 0!==e&&"string"==typeof e.swSrc;const convertBoolean=(e,t=!0)=>{switch(typeof e){case"boolean":return e;case"number":case"bigint":return e>0;case"object":return null!==e;case"string":if(!t){if("false"===e||"0"===e)return !1;return !0}return "true"===e||"1"===e;case"function":case"symbol":return !0;case"undefined":return !1}};const getFileHash=r=>e$3.createHash("md5").update(e$2.readFileSync(r)).digest("hex");const getContentHash=(e,t)=>t?"development":getFileHash(e).slice(0,16);const resolveWorkboxPlugin=({rootDir:s,basePath:a,isDev:p,workboxCommon:l,workboxOptions:c,importScripts:u,extendDefaultRuntimeCaching:d,dynamicStartUrl:h,hasFallbacks:f})=>{if(isInjectManifestConfig(c)){let o=r.join(s,c.swSrc);V.info(`Using InjectManifest with ${o}`);let r$1=new t$1.InjectManifest({...l,...c,swSrc:o});return p&&overrideAfterCalledMethod(r$1),r$1}{let e;let{skipWaiting:r=!0,clientsClaim:s=!0,cleanupOutdatedCaches:m=!0,ignoreURLParametersMatching:g=[],importScripts:w,runtimeCaching:b}=c;w&&u.push(...w);let k=!1;p?(V.info("Building in development mode, caching and precaching are disabled for the most part. This means that offline support is disabled, but you can continue developing other functions in service worker."),g.push(/ts/),e=[{urlPattern:/.*/i,handler:"NetworkOnly",options:{cacheName:"dev"}}],k=!0):e=resolveRuntimeCaching(b,d),h&&e.unshift({urlPattern:a,handler:"NetworkFirst",options:{cacheName:"start-url",plugins:[{cacheWillUpdate:async({response:e})=>e&&"opaqueredirect"===e.type?new Response(e.body,{status:200,statusText:"OK",headers:e.headers}):e}]}}),f&&e.forEach(e=>{!e.options||e.options.precacheFallback||e.options.plugins?.find(e=>"handlerDidError"in e)||(e.options.plugins||(e.options.plugins=[]),e.options.plugins.push({handlerDidError:async({request:e})=>"undefined"!=typeof self?self.fallback(e):Response.error()}));});let y=new t$1.GenerateSW({...l,skipWaiting:r,clientsClaim:s,cleanupOutdatedCaches:m,ignoreURLParametersMatching:g,importScripts:u,...c,runtimeCaching:e});return k&&overrideAfterCalledMethod(y),y}};const defaultSwcRc={module:{type:"es6",lazy:!0,noInterop:!0},jsc:{parser:{syntax:"typescript",tsx:!0,dynamicImport:!0,decorators:!1},transform:{react:{runtime:"automatic"}},target:"es2022",loose:!1},minify:!1};let e=(t,e)=>{if(t)return e?.(t)};const NextPWAContext={shouldMinify:e(process.env.NEXT_PWA_MINIFY,convertBoolean),useSwcMinify:e(process.env.NEXT_PWA_SWC_MINIFY,convertBoolean)};const setDefaultContext=(t,e)=>{void 0===NextPWAContext[t]&&(NextPWAContext[t]=e);};let n=fileURLToPath(new URL(".",import.meta.url)),a=()=>({compress:{ecma:5,comparisons:!1,inline:2},mangle:{safari10:!0},format:{ecma:5,safari10:!0,comments:!1,ascii_only:!0},resolveSwc:J,useSwcMinify:NextPWAContext.useSwcMinify});const getSharedWebpackConfig=({swcRc:o=defaultSwcRc})=>{let i=NextPWAContext.shouldMinify&&{minimize:!0,minimizer:[new s({minify:q,terserOptions:a()})]};return {resolve:{extensions:[".js",".ts"],fallback:{module:!1,dgram:!1,dns:!1,path:!1,fs:!1,os:!1,crypto:!1,stream:!1,http2:!1,net:!1,tls:!1,zlib:!1,child_process:!1}},resolveLoader:{alias:{"swc-loader":r.join(n,"swc-loader.cjs")}},module:{rules:[{test:/\.(t|j)s$/i,use:[{loader:"swc-loader",options:o}]}]},optimization:i||void 0}};const buildCustomWorker=({isDev:c$1,baseDir:a,customWorkerSrc:f,customWorkerDest:d,customWorkerPrefix:j,plugins:h=[],tsconfig:w,basePath:k})=>{let $=c([f,r.join("src",f)],t=>{t=r.join(a,t);let e=["ts","js"].map(o=>r.join(t,`index.${o}`)).filter(r=>e$2.existsSync(r));if(0===e.length)return;let n=e[0];return e.length>1&&V.info(`More than one custom worker found, ${n} will be used.`),n});if(!$)return;V.info(`Found a custom worker implementation at ${$}.`),w&&w.compilerOptions&&w.compilerOptions.paths&&a$1(defaultSwcRc,r.join(a,w.compilerOptions.baseUrl??"."),w.compilerOptions.paths);let b=`${j}-${getContentHash($,c$1)}.js`;return V.info(`Building custom worker to ${r.join(d,b)}...`),n$2({...getSharedWebpackConfig({swcRc:defaultSwcRc}),mode:NextPWAContext.shouldMinify?"production":"development",target:"webworker",entry:{main:$},output:{path:d,filename:b,chunkFilename:"sw-chunks/[id]-[chunkhash].js"},plugins:[new CleanWebpackPlugin({cleanOnceBeforeBuildPatterns:[r.join(d,`${j}-*.js`),r.join(d,`${j}-*.js.map`)]}),...h]}).run((o,r)=>{(o||r?.hasErrors())&&(V.error("Failed to build custom worker."),V.error(r?.toString({colors:!0})),process.exit(-1));}),r.posix.join(k,b)};const getFallbackEnvs=({fallbacks:L,buildId:e})=>{let t=L.data;t&&t.endsWith(".json")&&(t=r.posix.join("/_next/data",e,t));let o={__PWA_FALLBACK_DOCUMENT__:L.document||!1,__PWA_FALLBACK_IMAGE__:L.image||!1,__PWA_FALLBACK_AUDIO__:L.audio||!1,__PWA_FALLBACK_VIDEO__:L.video||!1,__PWA_FALLBACK_FONT__:L.font||!1,__PWA_FALLBACK_DATA__:t||!1};if(0!==Object.values(o).filter(_=>!!_).length)return V.info("This app will fallback to these precached routes when fetching from the cache and the network fails:"),o.__PWA_FALLBACK_DOCUMENT__&&V.info(`  Documents (pages): ${o.__PWA_FALLBACK_DOCUMENT__}`),o.__PWA_FALLBACK_IMAGE__&&V.info(`  Images: ${o.__PWA_FALLBACK_IMAGE__}`),o.__PWA_FALLBACK_AUDIO__&&V.info(`  Audio: ${o.__PWA_FALLBACK_AUDIO__}`),o.__PWA_FALLBACK_VIDEO__&&V.info(`  Videos: ${o.__PWA_FALLBACK_VIDEO__}`),o.__PWA_FALLBACK_FONT__&&V.info(`  Fonts: ${o.__PWA_FALLBACK_FONT__}`),o.__PWA_FALLBACK_DATA__&&V.info(`  Data (/_next/data/**/*.json): ${o.__PWA_FALLBACK_DATA__}`),o};let m=fileURLToPath(new URL(".",import.meta.url));const buildFallbackWorker=({isDev:e,buildId:c,fallbacks:p,destDir:u,basePath:f})=>{p=Object.keys(p).reduce((e,o)=>{let t=p[o];return t&&(e[o]=r.posix.join(f,t)),e},{});let j=getFallbackEnvs({fallbacks:p,buildId:c});if(!j)return;let k=r.join(m,"fallback.js"),b=`fallback-${getContentHash(k,e)}.js`;return n$2({...getSharedWebpackConfig({}),mode:NextPWAContext.shouldMinify?"production":"development",target:"webworker",entry:{main:k},output:{path:u,filename:b,chunkFilename:"sw-chunks/[id]-[chunkhash].js"},plugins:[new CleanWebpackPlugin({cleanOnceBeforeBuildPatterns:[r.join(u,"fallback-*.js"),r.join(u,"fallback-*.js.map")]}),new n$2.EnvironmentPlugin(j)]}).run((r,e)=>{(r||e?.hasErrors())&&(V.error("Failed to build fallback worker."),V.error(e?.toString({colors:!0})),process.exit(-1));}),{name:r.posix.join(f,b),precaches:Object.values(j).filter(r=>!!r)}};let p=fileURLToPath(new URL(".",import.meta.url));const buildSWEntryWorker=({isDev:e,destDir:u,shouldGenSWEWorker:l,basePath:a})=>{if(!l)return;let w=r.join(p,"sw-entry-worker.js"),c=`swe-worker-${getContentHash(w,e)}.js`;return n$2({...getSharedWebpackConfig({}),mode:NextPWAContext.shouldMinify?"production":"development",target:"webworker",entry:{main:w},output:{path:u,filename:c,chunkFilename:"sw-chunks/[id]-[chunkhash].js"},plugins:[new CleanWebpackPlugin({cleanOnceBeforeBuildPatterns:[r.join(u,"swe-worker-*.js"),r.join(u,"swe-worker-*.js.map")]})]}).run((r,e)=>{(r||e?.hasErrors())&&(V.error("Failed to build the service worker's sub-worker."),V.error(e?.toString({colors:!0})),process.exit(-1));}),r.posix.join(a,c)};const getDefaultDocumentPage=(t,f,n)=>{let s;let r$1=c(["pages","src/pages"],o=>(o=r.join(t,o),e$2.existsSync(o)?o:void 0));if(n&&(s=c(["app","src/app"],o=>(o=r.join(t,o),e$2.existsSync(o)?o:void 0))),r$1||s)for(let o of f){if(s){let t=r.join(s,`~offline/page.${o}`);if(e$2.existsSync(t))return "/~offline"}if(r$1){let t=r.join(r$1,`_offline.${o}`);if(t&&e$2.existsSync(t))return "/_offline"}}};let d=fileURLToPath(new URL(".",import.meta.url));var index = ((e={})=>(t={})=>({...t,webpack(w,j){let h;try{h=require("next/dist/server/config-shared").defaultConfig;}catch{}let b=t.experimental?.appDir??h?.experimental?.appDir??!0,g=j.webpack,{buildId:k,dev:x,config:{distDir:y=".next",pageExtensions:A=["tsx","ts","jsx","js","mdx"]}}=j,v=j.config.basePath||"/",D=f(j.dir,t?.typescript?.tsconfigPath),{disable:P=!1,register:E=!0,dest:W=y,sw:$="sw.js",cacheStartUrl:S=!0,dynamicStartUrl:O=!0,dynamicStartUrlRedirect:R,publicExcludes:N=["!noprecache/**/*"],buildExcludes:C=[],fallbacks:L={},cacheOnFrontEndNav:M=!1,aggressiveFrontEndNavCaching:T=!1,reloadOnOnline:G=!0,scope:B=v,customWorkerDir:U,customWorkerSrc:F=U||"worker",customWorkerDest:H=W,customWorkerPrefix:I="worker",workboxOptions:Y={},extendDefaultRuntimeCaching:q=!1,swcMinify:K=t.swcMinify??h?.swcMinify??!1}=e;if("function"==typeof t.webpack&&(w=t.webpack(w,j)),P)return j.isServer&&V.info("PWA support is disabled."),w;let V$1=[];w.plugins||(w.plugins=[]),V.info(`Compiling for ${j.isServer?"server":"client (static)"}...`);let z=r.posix.join(v,$),J=r.posix.join(B,"/");w.plugins.push(new g.DefinePlugin({__PWA_SW__:`'${z}'`,__PWA_SCOPE__:`'${J}'`,__PWA_ENABLE_REGISTER__:`${!!E}`,__PWA_START_URL__:O?`'${v}'`:void 0,__PWA_CACHE_ON_FRONT_END_NAV__:`${!!M}`,__PWA_AGGRFEN_CACHE__:`${!!T}`,__PWA_RELOAD_ON_ONLINE__:`${!!G}`}));let Q=r.join(d,"sw-entry.js"),X=w.entry;if(w.entry=()=>X().then(i=>(i["main.js"]&&!i["main.js"].includes(Q)&&(Array.isArray(i["main.js"])?i["main.js"].unshift(Q):"string"==typeof i["main.js"]&&(i["main.js"]=[Q,i["main.js"]])),i["main-app"]&&!i["main-app"].includes(Q)&&(Array.isArray(i["main-app"])?i["main-app"].unshift(Q):"string"==typeof i["main-app"]&&(i["main-app"]=[Q,i["main-app"]])),i)),!j.isServer){setDefaultContext("shouldMinify",!x),setDefaultContext("useSwcMinify",K);let e=r.join(j.dir,W),o=r.join(j.dir,H),t=buildSWEntryWorker({isDev:x,destDir:e,shouldGenSWEWorker:M,basePath:v});w.plugins.push(new g.DefinePlugin({__PWA_SW_ENTRY_WORKER__:t&&`'${t}'`})),E||(V.info("Service worker won't be automatically registered as per the config, please call the following code in componentDidMount or useEffect:"),V.info("  window.workbox.register()"),D?.compilerOptions?.types?.includes("@ducanh2912/next-pwa/workbox")||V.info("You may also want to add @ducanh2912/next-pwa/workbox to compilerOptions.types in your tsconfig.json/jsconfig.json.")),V.info(`Service worker: ${r.join(e,$)}`),V.info(`  URL: ${z}`),V.info(`  Scope: ${J}`),w.plugins.push(new CleanWebpackPlugin({cleanOnceBeforeBuildPatterns:[r.join(e,"workbox-*.js"),r.join(e,"workbox-*.js.map"),r.join(e,$),r.join(e,`${$}.map`),r.join(e,"sw-chunks/**")]}));let d=buildCustomWorker({isDev:x,baseDir:j.dir,swDest:e,customWorkerSrc:F,customWorkerDest:o,customWorkerPrefix:I,plugins:w.plugins.filter(i=>i instanceof g.DefinePlugin),tsconfig:D,basePath:v});d&&V$1.unshift(d);let{additionalManifestEntries:h,modifyURLPrefix:y={},manifestTransforms:P=[],exclude:T,...G}=Y,B=h??[];B||(B=s$1.sync(["**/*","!workbox-*.js","!workbox-*.js.map","!worker-*.js","!worker-*.js.map","!fallback-*.js","!fallback-*.js.map",`!${$.replace(/^\/+/,"")}`,`!${$.replace(/^\/+/,"")}.map`,...N],{cwd:"public"}).map(e=>({url:r.posix.join(v,e),revision:getFileHash(`public/${e}`)}))),S&&(O?"string"==typeof R&&R.length>0&&B.push({url:R,revision:k}):B.push({url:v,revision:k})),Object.keys(G).forEach(i=>void 0===G[i]&&delete G[i]);let U=!1;if(L){L.document||(L.document=getDefaultDocumentPage(j.dir,A,b));let i=buildFallbackWorker({isDev:x,buildId:k,fallbacks:L,destDir:e,basePath:v});i&&(U=!0,V$1.unshift(i.name),i.precaches.forEach(i=>{i&&"boolean"!=typeof i&&!B.find(e=>"string"!=typeof e&&e.url.startsWith(i))&&B.push({url:i,revision:k});}));}let Q=resolveWorkboxCommon({dest:e,sw:$,dev:x,buildId:k,buildExcludes:C,manifestEntries:B,manifestTransforms:P,modifyURLPrefix:y,publicPath:w.output?.publicPath}),X=resolveWorkboxPlugin({rootDir:j.dir,basePath:v,isDev:x,workboxCommon:Q,workboxOptions:G,importScripts:V$1,extendDefaultRuntimeCaching:q,dynamicStartUrl:O,hasFallbacks:U});w.plugins.push(X);}return w}}));export{index as default,t as runtimeCaching};
\ No newline at end of file
+const resolveRuntimeCaching=(o,n)=>{if(!o)return t;if(!n)return V.info("Custom runtimeCaching array found, using it instead of the default one."),o;V.info("Custom runtimeCaching array found, using it to extend the default one.");let a=[],i=new Set;for(let e of o)a.push(e),e.options?.cacheName&&i.add(e.options.cacheName);for(let e of t)e.options?.cacheName&&i.has(e.options.cacheName)||a.push(e);return a};const overrideAfterCalledMethod=e=>{Object.defineProperty(e,"alreadyCalled",{get:()=>!1,set(){}});};const isInjectManifestConfig=e=>void 0!==e&&"string"==typeof e.swSrc;const convertBoolean=(e,t=!0)=>{switch(typeof e){case"boolean":return e;case"number":case"bigint":return e>0;case"object":return null!==e;case"string":if(!t){if("false"===e||"0"===e)return !1;return !0}return "true"===e||"1"===e;case"function":case"symbol":return !0;case"undefined":return !1}};const getFileHash=r=>e$3.createHash("md5").update(e$2.readFileSync(r)).digest("hex");const getContentHash=(e,t)=>t?"development":getFileHash(e).slice(0,16);const resolveWorkboxPlugin=({rootDir:s,basePath:a,isDev:p,workboxCommon:l,workboxOptions:c,importScripts:u,extendDefaultRuntimeCaching:d,dynamicStartUrl:h,hasFallbacks:f})=>{if(isInjectManifestConfig(c)){let o=r.join(s,c.swSrc);V.info(`Using InjectManifest with ${o}`);let r$1=new t$1.InjectManifest({...l,...c,swSrc:o});return p&&overrideAfterCalledMethod(r$1),r$1}{let e;let{skipWaiting:r=!0,clientsClaim:s=!0,cleanupOutdatedCaches:m=!0,ignoreURLParametersMatching:g=[],importScripts:w,runtimeCaching:b}=c;w&&u.push(...w);let k=!1;p?(V.info("Building in development mode, caching and precaching are disabled for the most part. This means that offline support is disabled, but you can continue developing other functions in service worker."),g.push(/ts/),e=[{urlPattern:/.*/i,handler:"NetworkOnly",options:{cacheName:"dev"}}],k=!0):e=resolveRuntimeCaching(b,d),h&&e.unshift({urlPattern:a,handler:"NetworkFirst",options:{cacheName:"start-url",plugins:[{cacheWillUpdate:async({response:e})=>e&&"opaqueredirect"===e.type?new Response(e.body,{status:200,statusText:"OK",headers:e.headers}):e}]}}),f&&e.forEach(e=>{!e.options||e.options.precacheFallback||e.options.plugins?.find(e=>"handlerDidError"in e)||(e.options.plugins||(e.options.plugins=[]),e.options.plugins.push({handlerDidError:async({request:e})=>"undefined"!=typeof self?self.fallback(e):Response.error()}));});let y=new t$1.GenerateSW({...l,skipWaiting:r,clientsClaim:s,cleanupOutdatedCaches:m,ignoreURLParametersMatching:g,importScripts:u,...c,runtimeCaching:e});return k&&overrideAfterCalledMethod(y),y}};const defaultSwcRc={module:{type:"es6",lazy:!0,noInterop:!0},jsc:{parser:{syntax:"typescript",tsx:!0,dynamicImport:!0,decorators:!1},transform:{react:{runtime:"automatic"}},target:"es2022",loose:!1},minify:!1};let e=(t,e)=>{if(t)return e?.(t)};const NextPWAContext={shouldMinify:e(process.env.NEXT_PWA_MINIFY,convertBoolean),useSwcMinify:e(process.env.NEXT_PWA_SWC_MINIFY,convertBoolean)};const setDefaultContext=(t,e)=>{void 0===NextPWAContext[t]&&(NextPWAContext[t]=e);};let n=fileURLToPath(new URL(".",import.meta.url)),a=()=>({compress:{ecma:5,comparisons:!1,inline:2},mangle:{safari10:!0},format:{ecma:5,safari10:!0,comments:!1,ascii_only:!0},resolveSwc:J,useSwcMinify:NextPWAContext.useSwcMinify});const getSharedWebpackConfig=({swcRc:o=defaultSwcRc})=>{let i=NextPWAContext.shouldMinify&&{minimize:!0,minimizer:[new s({minify:q,terserOptions:a()})]};return {resolve:{extensions:[".js",".ts"],fallback:{module:!1,dgram:!1,dns:!1,path:!1,fs:!1,os:!1,crypto:!1,stream:!1,http2:!1,net:!1,tls:!1,zlib:!1,child_process:!1}},resolveLoader:{alias:{"swc-loader":r.join(n,"swc-loader.cjs")}},module:{rules:[{test:/\.(t|j)s$/i,use:[{loader:"swc-loader",options:o}]},{test:/\.m?js$/,resolve:{fullySpecified:false}}]},optimization:i||void 0}};const buildCustomWorker=({isDev:c$1,baseDir:a,customWorkerSrc:f,customWorkerDest:d,customWorkerPrefix:j,plugins:h=[],tsconfig:w,basePath:k})=>{let $=c([f,r.join("src",f)],t=>{t=r.join(a,t);let e=["ts","js"].map(o=>r.join(t,`index.${o}`)).filter(r=>e$2.existsSync(r));if(0===e.length)return;let n=e[0];return e.length>1&&V.info(`More than one custom worker found, ${n} will be used.`),n});if(!$)return;V.info(`Found a custom worker implementation at ${$}.`),w&&w.compilerOptions&&w.compilerOptions.paths&&a$1(defaultSwcRc,r.join(a,w.compilerOptions.baseUrl??"."),w.compilerOptions.paths);let b=`${j}-${getContentHash($,c$1)}.js`;return V.info(`Building custom worker to ${r.join(d,b)}...`),n$2({...getSharedWebpackConfig({swcRc:defaultSwcRc}),mode:NextPWAContext.shouldMinify?"production":"development",target:"webworker",entry:{main:$},output:{path:d,filename:b,chunkFilename:"sw-chunks/[id]-[chunkhash].js"},plugins:[new CleanWebpackPlugin({cleanOnceBeforeBuildPatterns:[r.join(d,`${j}-*.js`),r.join(d,`${j}-*.js.map`)]}),...h]}).run((o,r)=>{(o||r?.hasErrors())&&(V.error("Failed to build custom worker."),V.error(r?.toString({colors:!0})),process.exit(-1));}),r.posix.join(k,b)};const getFallbackEnvs=({fallbacks:L,buildId:e})=>{let t=L.data;t&&t.endsWith(".json")&&(t=r.posix.join("/_next/data",e,t));let o={__PWA_FALLBACK_DOCUMENT__:L.document||!1,__PWA_FALLBACK_IMAGE__:L.image||!1,__PWA_FALLBACK_AUDIO__:L.audio||!1,__PWA_FALLBACK_VIDEO__:L.video||!1,__PWA_FALLBACK_FONT__:L.font||!1,__PWA_FALLBACK_DATA__:t||!1};if(0!==Object.values(o).filter(_=>!!_).length)return V.info("This app will fallback to these precached routes when fetching from the cache and the network fails:"),o.__PWA_FALLBACK_DOCUMENT__&&V.info(`  Documents (pages): ${o.__PWA_FALLBACK_DOCUMENT__}`),o.__PWA_FALLBACK_IMAGE__&&V.info(`  Images: ${o.__PWA_FALLBACK_IMAGE__}`),o.__PWA_FALLBACK_AUDIO__&&V.info(`  Audio: ${o.__PWA_FALLBACK_AUDIO__}`),o.__PWA_FALLBACK_VIDEO__&&V.info(`  Videos: ${o.__PWA_FALLBACK_VIDEO__}`),o.__PWA_FALLBACK_FONT__&&V.info(`  Fonts: ${o.__PWA_FALLBACK_FONT__}`),o.__PWA_FALLBACK_DATA__&&V.info(`  Data (/_next/data/**/*.json): ${o.__PWA_FALLBACK_DATA__}`),o};let m=fileURLToPath(new URL(".",import.meta.url));const buildFallbackWorker=({isDev:e,buildId:c,fallbacks:p,destDir:u,basePath:f})=>{p=Object.keys(p).reduce((e,o)=>{let t=p[o];return t&&(e[o]=r.posix.join(f,t)),e},{});let j=getFallbackEnvs({fallbacks:p,buildId:c});if(!j)return;let k=r.join(m,"fallback.js"),b=`fallback-${getContentHash(k,e)}.js`;return n$2({...getSharedWebpackConfig({}),mode:NextPWAContext.shouldMinify?"production":"development",target:"webworker",entry:{main:k},output:{path:u,filename:b,chunkFilename:"sw-chunks/[id]-[chunkhash].js"},plugins:[new CleanWebpackPlugin({cleanOnceBeforeBuildPatterns:[r.join(u,"fallback-*.js"),r.join(u,"fallback-*.js.map")]}),new n$2.EnvironmentPlugin(j)]}).run((r,e)=>{(r||e?.hasErrors())&&(V.error("Failed to build fallback worker."),V.error(e?.toString({colors:!0})),process.exit(-1));}),{name:r.posix.join(f,b),precaches:Object.values(j).filter(r=>!!r)}};let p=fileURLToPath(new URL(".",import.meta.url));const buildSWEntryWorker=({isDev:e,destDir:u,shouldGenSWEWorker:l,basePath:a})=>{if(!l)return;let w=r.join(p,"sw-entry-worker.js"),c=`swe-worker-${getContentHash(w,e)}.js`;return n$2({...getSharedWebpackConfig({}),mode:NextPWAContext.shouldMinify?"production":"development",target:"webworker",entry:{main:w},output:{path:u,filename:c,chunkFilename:"sw-chunks/[id]-[chunkhash].js"},plugins:[new CleanWebpackPlugin({cleanOnceBeforeBuildPatterns:[r.join(u,"swe-worker-*.js"),r.join(u,"swe-worker-*.js.map")]})]}).run((r,e)=>{(r||e?.hasErrors())&&(V.error("Failed to build the service worker's sub-worker."),V.error(e?.toString({colors:!0})),process.exit(-1));}),r.posix.join(a,c)};const getDefaultDocumentPage=(t,f,n)=>{let s;let r$1=c(["pages","src/pages"],o=>(o=r.join(t,o),e$2.existsSync(o)?o:void 0));if(n&&(s=c(["app","src/app"],o=>(o=r.join(t,o),e$2.existsSync(o)?o:void 0))),r$1||s)for(let o of f){if(s){let t=r.join(s,`~offline/page.${o}`);if(e$2.existsSync(t))return "/~offline"}if(r$1){let t=r.join(r$1,`_offline.${o}`);if(t&&e$2.existsSync(t))return "/_offline"}}};let d=fileURLToPath(new URL(".",import.meta.url));var index = ((e={})=>(t={})=>({...t,webpack(w,j){let h;try{h=require("next/dist/server/config-shared").defaultConfig;}catch{}let b=t.experimental?.appDir??h?.experimental?.appDir??!0,g=j.webpack,{buildId:k,dev:x,config:{distDir:y=".next",pageExtensions:A=["tsx","ts","jsx","js","mdx"]}}=j,v=j.config.basePath||"/",D=f(j.dir,t?.typescript?.tsconfigPath),{disable:P=!1,register:E=!0,dest:W=y,sw:$="sw.js",cacheStartUrl:S=!0,dynamicStartUrl:O=!0,dynamicStartUrlRedirect:R,publicExcludes:N=["!noprecache/**/*"],buildExcludes:C=[],fallbacks:L={},cacheOnFrontEndNav:M=!1,aggressiveFrontEndNavCaching:T=!1,reloadOnOnline:G=!0,scope:B=v,customWorkerDir:U,customWorkerSrc:F=U||"worker",customWorkerDest:H=W,customWorkerPrefix:I="worker",workboxOptions:Y={},extendDefaultRuntimeCaching:q=!1,swcMinify:K=t.swcMinify??h?.swcMinify??!1}=e;if("function"==typeof t.webpack&&(w=t.webpack(w,j)),P)return j.isServer&&V.info("PWA support is disabled."),w;let V$1=[];w.plugins||(w.plugins=[]),V.info(`Compiling for ${j.isServer?"server":"client (static)"}...`);let z=r.posix.join(v,$),J=r.posix.join(B,"/");w.plugins.push(new g.DefinePlugin({__PWA_SW__:`'${z}'`,__PWA_SCOPE__:`'${J}'`,__PWA_ENABLE_REGISTER__:`${!!E}`,__PWA_START_URL__:O?`'${v}'`:void 0,__PWA_CACHE_ON_FRONT_END_NAV__:`${!!M}`,__PWA_AGGRFEN_CACHE__:`${!!T}`,__PWA_RELOAD_ON_ONLINE__:`${!!G}`}));let Q=r.join(d,"sw-entry.js"),X=w.entry;if(w.entry=()=>X().then(i=>(i["main.js"]&&!i["main.js"].includes(Q)&&(Array.isArray(i["main.js"])?i["main.js"].unshift(Q):"string"==typeof i["main.js"]&&(i["main.js"]=[Q,i["main.js"]])),i["main-app"]&&!i["main-app"].includes(Q)&&(Array.isArray(i["main-app"])?i["main-app"].unshift(Q):"string"==typeof i["main-app"]&&(i["main-app"]=[Q,i["main-app"]])),i)),!j.isServer){setDefaultContext("shouldMinify",!x),setDefaultContext("useSwcMinify",K);let e=r.join(j.dir,W),o=r.join(j.dir,H),t=buildSWEntryWorker({isDev:x,destDir:e,shouldGenSWEWorker:M,basePath:v});w.plugins.push(new g.DefinePlugin({__PWA_SW_ENTRY_WORKER__:t&&`'${t}'`})),E||(V.info("Service worker won't be automatically registered as per the config, please call the following code in componentDidMount or useEffect:"),V.info("  window.workbox.register()"),D?.compilerOptions?.types?.includes("@ducanh2912/next-pwa/workbox")||V.info("You may also want to add @ducanh2912/next-pwa/workbox to compilerOptions.types in your tsconfig.json/jsconfig.json.")),V.info(`Service worker: ${r.join(e,$)}`),V.info(`  URL: ${z}`),V.info(`  Scope: ${J}`),w.plugins.push(new CleanWebpackPlugin({cleanOnceBeforeBuildPatterns:[r.join(e,"workbox-*.js"),r.join(e,"workbox-*.js.map"),r.join(e,$),r.join(e,`${$}.map`),r.join(e,"sw-chunks/**")]}));let d=buildCustomWorker({isDev:x,baseDir:j.dir,swDest:e,customWorkerSrc:F,customWorkerDest:o,customWorkerPrefix:I,plugins:w.plugins.filter(i=>i instanceof g.DefinePlugin),tsconfig:D,basePath:v});d&&V$1.unshift(d);let{additionalManifestEntries:h,modifyURLPrefix:y={},manifestTransforms:P=[],exclude:T,...G}=Y,B=h??[];B||(B=s$1.sync(["**/*","!workbox-*.js","!workbox-*.js.map","!worker-*.js","!worker-*.js.map","!fallback-*.js","!fallback-*.js.map",`!${$.replace(/^\/+/,"")}`,`!${$.replace(/^\/+/,"")}.map`,...N],{cwd:"public"}).map(e=>({url:r.posix.join(v,e),revision:getFileHash(`public/${e}`)}))),S&&(O?"string"==typeof R&&R.length>0&&B.push({url:R,revision:k}):B.push({url:v,revision:k})),Object.keys(G).forEach(i=>void 0===G[i]&&delete G[i]);let U=!1;if(L){L.document||(L.document=getDefaultDocumentPage(j.dir,A,b));let i=buildFallbackWorker({isDev:x,buildId:k,fallbacks:L,destDir:e,basePath:v});i&&(U=!0,V$1.unshift(i.name),i.precaches.forEach(i=>{i&&"boolean"!=typeof i&&!B.find(e=>"string"!=typeof e&&e.url.startsWith(i))&&B.push({url:i,revision:k});}));}let Q=resolveWorkboxCommon({dest:e,sw:$,dev:x,buildId:k,buildExcludes:C,manifestEntries:B,manifestTransforms:P,modifyURLPrefix:y,publicPath:w.output?.publicPath}),X=resolveWorkboxPlugin({rootDir:j.dir,basePath:v,isDev:x,workboxCommon:Q,workboxOptions:G,importScripts:V$1,extendDefaultRuntimeCaching:q,dynamicStartUrl:O,hasFallbacks:U});w.plugins.push(X);}return w}}));export{index as default,t as runtimeCaching};
\ No newline at end of file
