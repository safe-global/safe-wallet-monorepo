appId: ${APP_ID}
tags:
  - util
---
- runScript:
    file: ../../utils/scripts/defaults.js
# ===========================================
# Actions List View (Reusable Component)
# ===========================================
# Tests the actions list view for transactions that have multiple actions
# Can be used for both history transactions and pending transactions
#
# This component assumes you're already on the "Actions" screen
# Call this after tapping on "Actions" from either:
# - Transaction details screen (history)
# - Confirm transaction screen (pending)

- assertVisible: 'Actions'

# Verify action items are visible as containers/cards
# Actions are displayed in containers that can be tapped
# Each action shows: number, description like "Send X ETH to", address
- extendedWaitUntil:
    visible:
      text: '.*\d+.*'
      optional: true
    timeout: ${output.defaults.extendedWaitUntilTimeout}

# Verify action descriptions are visible
# Format: "Send 0.01 ETH to" or "Send 0.05 ETH to" or "approve" or "setPreSignature"
- extendedWaitUntil:
    visible:
      text: '.*(Send|approve|setPreSignature).*'
      optional: true
    timeout: ${output.defaults.extendedWaitUntilTimeout}

# Verify addresses are visible in action items (if applicable)
- extendedWaitUntil:
    visible:
      text: '0x[0-9a-fA-F]{4}.*[0-9a-fA-F]{4}'
      optional: true
    timeout: ${output.defaults.extendedWaitUntilTimeout}

# Click on the first action item (Container is clickable)
# We'll tap on the action text/description
- tapOn:
    id: 'tx-action-item-0'

# Test clicking on individual action items
- runFlow:
    file: ./verify-action-detail.yml
