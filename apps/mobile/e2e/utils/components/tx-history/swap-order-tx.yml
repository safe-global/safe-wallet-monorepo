appId: global.safe.mobileapp.ios
tags:
  - util
---
# ===========================================
# Swap Order Transaction
# ===========================================
- assertVisible: Transaction details

# Verify swap order container is visible
- assertVisible:
    id: 'history-swap-order-container'

# ===========================================
# Swap Header - Sell and Receive Sections
# ===========================================
- assertVisible:
    id: 'history-swap-order-header'

# Verify sell container and amount
- assertVisible:
    id: 'swap-header-sell-container'
- assertVisible: Sell
- assertVisible:
    id: 'swap-header-sell-amount'
    text: '.*\d+.*[A-Z]{2,}.*'

# Verify receive container and amount
- assertVisible:
    id: 'swap-header-receive-container'
- assertVisible: 'For at least'
- assertVisible:
    id: 'swap-header-receive-amount'
    text: '.*\d+.*[A-Z]{2,}.*'

# ===========================================
# Swap Order Details Section
# ===========================================
- assertVisible:
    id: 'history-swap-order-details'

# Execution price row (scoped to details section)
- assertVisible:
    id: 'history-swap-order-details'
    containsDescendants:
      - text: 'Execution price'
- assertVisible:
    id: 'history-swap-order-details'
    containsDescendants:
      - text: '.*1 [A-Z]{2,} = .*\d+.*[A-Z]{2,}.*'

# Order ID row (scoped to details section)
- assertVisible:
    id: 'history-swap-order-details'
    containsDescendants:
      - text: 'Order ID'
- assertVisible:
    id: 'history-swap-order-details'
    containsDescendants:
      - text: '0x[0-9a-fA-F]{4}.*'

# Network row (scoped to details section)
- assertVisible:
    id: 'history-swap-order-details'
    containsDescendants:
      - text: 'Network'

# Status row (scoped to details section)
- assertVisible:
    id: 'history-swap-order-details'
    containsDescendants:
      - text: 'Status'
- assertVisible:
    id: 'history-swap-order-details'
    containsDescendants:
      - text: '.*Filled.*'

# Total fees row (scoped to details section)
- assertVisible:
    id: 'history-swap-order-details'
    containsDescendants:
      - text: 'Total fees'
- assertVisible:
    id: 'history-swap-order-details'
    containsDescendants:
      - text: '.*\d+.*[A-Z]{2,}.*'

# ===========================================
# Transaction Details Button
# ===========================================
- runFlow:
    file: ../../assertions/verify-tx-details.yml

# ===========================================
# Common Transaction Info
# ===========================================
- runFlow:
    file: ../../assertions/verify-tx-info.yml

# ===========================================
# Confirmations
# ===========================================
- runFlow:
    file: ../../assertions/verify-tx-history-confirmations.yml

# ===========================================
# Test Explorer Link
# ===========================================
- runFlow:
    file: ../../assertions/verify-explorer-link.yml

- assertVisible: Transaction details

# ===========================================
# Test Share Transaction Button
# ===========================================
- runFlow:
    file: ../../assertions/verify-share-link.yml

- assertVisible: Transaction details

# ===========================================
# Test Transaction Details Button
# ===========================================
- runFlow:
    file: ../../assertions/verify-advanced-details.yml

- assertVisible: Transaction details
