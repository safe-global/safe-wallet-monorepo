appId: global.safe.mobileapp.ios
tags:
  - util
---
# ===========================================
# setFallbackHandler Transaction (Pending State)
# ===========================================
# Tests the setFallbackHandler transaction detail view for pending transactions
# Reuses shared test components where applicable

- assertVisible: 'Confirm transaction'

# Verify the transaction method name is visible
- assertVisible:
    text: 'setFallbackHandler'

# ===========================================
# Network Display
# ===========================================
- runFlow:
    file: ../../assertions/verify-tx-network.yml

# ===========================================
# Transaction Details Button
# ===========================================
- runFlow:
    file: ../../assertions/verify-tx-details.yml

# ===========================================
# Transaction Checks (Pending transactions show checks instead of created/executed)
# ===========================================
- runFlow:
    file: ../../assertions/verify-tx-checks.yml
    env:
      BALANCE_CHANGE_PATTERN: 'No balance change detected'
      TRANSACTION_SIMULATION_PATTERN: 'Success'

# ===========================================
# Confirmations
# ===========================================
# Test tapping on confirmations to open the bottom sheet and verify signed badge
# Verify that 1/1 confirmations are shown (the transaction has all required confirmations)
- runFlow:
    file: ../../assertions/verify-tx-confirmations.yml
    env:
      CONFIRMATIONS_PATTERN: '.*1/1.*'

# ===========================================
# Review and Execute Screen
# ===========================================
# Test navigating to Review and execute screen and verifying all elements
- runFlow:
    file: ../../assertions/verify-review-and-execute.yml
    env:
      EXPECTED_SIGNER_PATTERN: '.*6fED.*'
      TX_EXECUTION_STATUS: 'succeed'
      EXPECTED_EXECUTION_METHOD: 'relay'

